import{b as ie,d as re,g as se,s as pe}from"./chunk-XNPRTEAG.js";import{a as ae}from"./chunk-B3PV22LF.js";import{b as V,c as G,d as Y,f as K,h as $,k as J,l as x,m as X,n as Z,o as q,p as Q,q as ee,s as te,t as ne,w as oe,x as _}from"./chunk-PGYSP5QJ.js";import{B as f,Db as c,Eb as B,Hb as D,Ia as E,Ib as F,Jb as L,Mb as N,N as A,Nb as j,Pa as p,Pb as U,Q as R,R as H,Sb as W,Ub as z,V as I,W as d,Za as h,_a as k,cb as y,d as g,kb as m,o as O,p as P,pb as a,qb as i,rb as s,s as S,t as T,xb as v}from"./chunk-AR7SJQHY.js";var me=(e,t)=>{let n=d(ae),o=d(ne);return n.isLoggedIn().pipe(A(r=>{r||o.navigate(["/login"])}),T(r=>r),f(()=>(o.navigate(["/login"]),O(!1))))};var w=[{path:"",loadComponent:()=>import("./chunk-FXVT2NSJ.js").then(e=>e.WebsiteComponent),children:[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",loadComponent:()=>import("./chunk-KM2VFARH.js").then(e=>e.HomeComponent)},{path:"gallery",loadComponent:()=>import("./chunk-5JBKCJ74.js").then(e=>e.GalleryComponent)}]},{path:"login",loadComponent:()=>import("./chunk-RVHAVQKF.js").then(e=>e.LoginComponent)},{path:"register",loadComponent:()=>import("./chunk-WZ6KT4XG.js").then(e=>e.RegisterComponent)},{path:"reset-password",loadComponent:()=>import("./chunk-H27VETVW.js").then(e=>e.ResetPasswordComponent)},{path:"forgot-password",loadComponent:()=>import("./chunk-J2DGBKWU.js").then(e=>e.ForgotPasswordComponent)},{path:"resend-email-verification",loadComponent:()=>import("./chunk-74FEJ2QA.js").then(e=>e.ResendEmailVerificationComponent)},{path:"verify-email",loadComponent:()=>import("./chunk-52ZORXOL.js").then(e=>e.VerifyEmailComponent)},{path:"two-factor-step",loadComponent:()=>import("./chunk-QTQOXTSQ.js").then(e=>e.TwoFactorComponent)},{path:"dashboard",loadComponent:()=>import("./chunk-2AYVBEZG.js").then(e=>e.Dashboard2Component),canActivate:[me],children:[{path:"",pathMatch:"full",redirectTo:"create-account-game"},{path:"home-dashboard",loadComponent:()=>import("./chunk-SQ5WID2Q.js").then(e=>e.DashboardHomeComponent)},{path:"create-account-game",loadComponent:()=>import("./chunk-UQKIRRUE.js").then(e=>e.CreateAccountGameComponent)},{path:"change-password-game",loadComponent:()=>import("./chunk-Q6ZOODAB.js").then(e=>e.ChangePasswordGameComponent)},{path:"buy-terra-coin",loadComponent:()=>import("./chunk-V3NEYFTA.js").then(e=>e.BuyTerraCoinComponent)},{path:"send-terra-coin",loadComponent:()=>import("./chunk-562FJA2X.js").then(e=>e.SendTerraCoinComponent)},{path:"support",loadComponent:()=>import("./chunk-X3BFSUGT.js").then(e=>e.SupportComponent)},{path:"download",loadComponent:()=>import("./chunk-HHJXKIAC.js").then(e=>e.DownloadComponent)},{path:"setting-account-master",loadComponent:()=>import("./chunk-TXX6Y7AA.js").then(e=>e.SettingsAccountMasterComponent)}]},{path:"**",loadComponent:()=>import("./chunk-NLO77OMZ.js").then(e=>e.WebsiteNotFoundComponent)}],de=class e{static \u0275fac=function(n){return new(n||e)};static \u0275mod=k({type:e});static \u0275inj=H({imports:[_.forRoot(w),_]})};var ce=(e,t)=>{let n=localStorage.getItem("deviceId")||"",o=e.url.includes("n8n.l2terra.online"),r=o?e.headers:e.headers.set("X-Device-Id",n),l=e.clone({withCredentials:!o,headers:r});return t(l).pipe(f(ge=>P(()=>ge)))};var le={providers:[W({eventCoalescing:!0}),oe(w),Z(Q(),q([ce]))]};var u=class e{constructor(t){this.http=t}WEBHOOK_URL="https://n8n.l2terra.online/webhook/48cb067e-63a7-42be-b22e-a015e1e8cded";AUTH_USERNAME="ak4n1";AUTH_PASSWORD="1234567890";sendMessageAsync(t){return g(this,null,function*(){let n={sessionId:"asdasdsa",message:t,timestamp:new Date().toISOString(),action:"sendMessage"},o=new x({"Content-Type":"application/json",Authorization:"Basic "+btoa(`${this.AUTH_USERNAME}:${this.AUTH_PASSWORD}`)});try{return yield S(this.http.post(this.WEBHOOK_URL,n,{headers:o,withCredentials:!1}))}catch(r){throw console.error("Error al enviar mensaje:",r),r}})}sendMessage(t){let n={sessionId:"asdasdsa",message:t,timestamp:new Date().toISOString(),action:"sendMessage"},o=new x({"Content-Type":"application/json",Authorization:"Basic "+btoa(`${this.AUTH_USERNAME}:${this.AUTH_PASSWORD}`)});return this.http.post(this.WEBHOOK_URL,n,{headers:o,withCredentials:!1})}static \u0275fac=function(n){return new(n||e)(I(X))};static \u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"})};var he=(e,t)=>({"user-message":e,"bot-message":t});function ue(e,t){e&1&&(a(0,"div",9),s(1,"i",10),c(2," \xBFHow can I help you today? "),i())}function be(e,t){if(e&1&&(a(0,"div",11)(1,"div",12),s(2,"div",13),a(3,"div",14),c(4),j(5,"date"),i()()()),e&2){let n=t.$implicit;m("ngClass",N(6,he,n.sender==="user",n.sender==="bot")),p(2),m("innerHTML",n.text,E),p(2),B(U(5,3,n.timestamp,"shortTime"))}}function Ce(e,t){e&1&&(a(0,"div",15)(1,"div",16),s(2,"span")(3,"span")(4,"span"),i()())}function ye(e,t){e&1&&(a(0,"span"),s(1,"i",17),i())}function ve(e,t){e&1&&(a(0,"span"),c(1,"Sending..."),i())}var b=class e{msg="";messages=[];isLoading=!1;chatbotService=d(u);cdRef=d(z);sanitizer=d(ee);sendMessage(){return g(this,null,function*(){let t=this.msg.trim();if(!(!t||this.isLoading)){this.addMessage(t,"user"),this.msg="",this.isLoading=!0;try{let n=yield this.chatbotService.sendMessageAsync(t),o=this.extractBotResponse(n);this.addMessage(o,"bot"),console.log("Respuesta del bot:",o),console.log("Respuesta completa:",n)}catch(n){this.addMessage("Error al conectar con el servicio","bot"),console.error("Error:",n)}finally{this.isLoading=!1,this.forceViewUpdate(),this.scrollToBottom()}}})}addMessage(t,n){let o=n==="bot"?this.sanitizer.bypassSecurityTrustHtml(t.replace(/\n/g,"<br>")):t;this.messages=[...this.messages,{text:o,sender:n,timestamp:new Date}],this.cdRef.detectChanges()}extractBotResponse(t){return t?.output||t?.reply||t?.message||t?.data?.message||t?.result||JSON.stringify(t)||"Recib\xED tu mensaje"}forceViewUpdate(){this.cdRef.detectChanges()}scrollToBottom(){setTimeout(()=>{let t=document.querySelector(".messages-container");t&&(t.scrollTop=t.scrollHeight)},100)}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=h({type:e,selectors:[["app-botterra"]],decls:10,vars:8,consts:[[1,"chatbot-container"],[1,"messages-container"],["class","welcome-message",4,"ngIf"],["class","message",3,"ngClass",4,"ngFor","ngForOf"],["class","loading-message",4,"ngIf"],[1,"input-container"],["placeholder","Type your message...","name","message",1,"message-input",3,"ngModelChange","keyup.enter","ngModel","disabled"],[1,"send-button",3,"click","disabled"],[4,"ngIf"],[1,"welcome-message"],[1,"fa-solid","fa-circle-info"],[1,"message",3,"ngClass"],[1,"message-content"],[3,"innerHTML"],[1,"message-time"],[1,"loading-message"],[1,"typing-indicator"],[1,"fa-solid","fa-paper-plane"]],template:function(n,o){n&1&&(a(0,"div",0)(1,"div",1),y(2,ue,3,0,"div",2)(3,be,6,9,"div",3)(4,Ce,5,0,"div",4),i(),a(5,"div",5)(6,"input",6),L("ngModelChange",function(l){return F(o.msg,l)||(o.msg=l),l}),v("keyup.enter",function(){return o.sendMessage()}),i(),a(7,"button",7),v("click",function(){return o.sendMessage()}),y(8,ye,2,0,"span",8)(9,ve,2,0,"span",8),i()()()),n&2&&(p(2),m("ngIf",o.messages.length===0),p(),m("ngForOf",o.messages),p(),m("ngIf",o.isLoading),p(2),D("ngModel",o.msg),m("disabled",o.isLoading),p(),m("disabled",!o.msg.trim()||o.isLoading),p(),m("ngIf",!o.isLoading),p(),m("ngIf",o.isLoading))},dependencies:[$,V,G,Y,K,pe,ie,re,se],styles:[".chatbot-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;padding:10px;background:linear-gradient(to bottom,#0c0f20,#000);border-radius:12px;overflow:hidden}.messages-container[_ngcontent-%COMP%]{flex:1;padding:20px;overflow-y:auto;display:flex;flex-direction:column;gap:12px}.message[_ngcontent-%COMP%]{max-width:80%;padding:12px 16px;border-radius:18px;line-height:1.4;position:relative;animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.bot-message[_ngcontent-%COMP%]{align-self:flex-start;background-color:#11111165;color:#dabe64;border-bottom-left-radius:4px;box-shadow:0 4px 6px #0000001a;border:1px solid #dabe64}.user-message[_ngcontent-%COMP%]{align-self:flex-end;background-color:#11111165;color:#dabe64;border:1px solid #dabe64;border-bottom-right-radius:4px}.input-container[_ngcontent-%COMP%]{display:flex;padding:16px;border-top:1px solid rgba(108,92,231,.2)}.message-input[_ngcontent-%COMP%]{flex:1;padding:12px 16px;border:1px solid rgba(108,92,231,.2);border-radius:24px;outline:none;font-size:14px;transition:all .3s ease;background-color:transparent;color:#dabe64}.message-input[_ngcontent-%COMP%]:focus{border-color:#dabe64;box-shadow:0 0 0 3px #6c5ce733}.send-button[_ngcontent-%COMP%]{margin-left:12px;width:48px;height:48px;border-radius:50%;background:linear-gradient(to right,#746535,#dabe64);color:#fff;border:none;display:flex;align-items:center;justify-content:center;transition:all .3s ease}.send-button[_ngcontent-%COMP%]:hover{border:1px solid rgba(218,190,100,.5);background:transparent;color:#dabe64;transform:translateY(-2px);cursor:pointer}.send-icon[_ngcontent-%COMP%]{width:20px;height:20px;fill:currentColor}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.messages-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.messages-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#0000000d}.messages-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#6c5ce7;border-radius:3px}.welcome-message[_ngcontent-%COMP%]{text-align:center;padding:20px;font-style:italic;background:linear-gradient(to right,#746535,#dabe64);color:#fff;border-radius:12px;margin-bottom:16px}.loading-message[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:12px}.typing-indicator[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:4px}.typing-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:8px;height:8px;background-color:#dabe64;border-radius:50%;display:inline-block;animation:_ngcontent-%COMP%_typingAnimation 1.4s infinite ease-in-out}.typing-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.typing-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){animation-delay:.4s}.message-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.message-time[_ngcontent-%COMP%]{font-size:.75rem;opacity:.7;margin-top:4px;align-self:flex-end}@keyframes _ngcontent-%COMP%_typingAnimation{0%,60%,to{transform:translateY(0)}30%{transform:translateY(-5px)}}"]})};var C=class e{title="terra-web";constructor(){}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=h({type:e,selectors:[["app-root"]],decls:11,vars:0,consts:[["type","button","data-bs-toggle","offcanvas","data-bs-target","#offCanvasChat","aria-controls","offCanvasChat",1,"button-assistant"],[1,"fa-solid","fa-robot",2,"pointer-events","none"],["tabindex","-1","id","offCanvasChat","aria-labelledby","offCanvasChatLabel",1,"offcanvas","offcanvas-end","chatbot-container"],[1,"offcanvas-header"],["id","offCanvasChatLabel",1,"offcanvas-title"],[1,"fa-solid","fa-robot"],["type","button","data-bs-dismiss","offcanvas","aria-label","Cerrar",1,"btn-close","text-reset"],[1,"offcanvas-body","p-0"]],template:function(n,o){n&1&&(s(0,"router-outlet"),a(1,"button",0),s(2,"i",1),i(),a(3,"div",2)(4,"div",3)(5,"h5",4),s(6,"i",5),c(7," Terra Assistant"),i(),s(8,"button",6),i(),a(9,"div",7),s(10,"app-botterra"),i()())},dependencies:[te,b],styles:[".button-assistant[_ngcontent-%COMP%]{position:fixed;bottom:10%;right:50px;z-index:999;width:60px;height:60px;padding:10px;font-size:24px;background:linear-gradient(to right,#746535,#dabe64);color:#fff;border:none;border-radius:50%;box-shadow:0 2px 8px #0000004d;display:flex;align-items:center;justify-content:center;transition:transform .2s ease}.button-assistant[_ngcontent-%COMP%]:hover{transform:scale(1.05);padding:15px}.chatbot-container[_ngcontent-%COMP%]{background:linear-gradient(to bottom,#0c0f20,#000)}.offcanvas-title[_ngcontent-%COMP%]{color:#dabe64}"]})};J(C,le).catch(e=>console.error(e));
