import{u as Q}from"./chunk-LRGELE7Q.js";import{a as _}from"./chunk-525NMH2I.js";import{C as G,k as Y,l as K,r as H,s as J,t as W}from"./chunk-FEPRFNA5.js";import{C as h,Eb as R,Fb as a,G as D,Gb as m,Hb as g,Ka as j,N as T,Qa as c,Qb as f,R as L,Rb as u,Tb as z,Va as N,W as V,_a as q,a as E,b as I,ba as C,ca as v,db as p,g as U,j as A,lb as l,nb as w,o as S,qb as i,rb as n,sb as M,t as O,vb as k,yb as P,zb as d}from"./chunk-RQKQ5XMY.js";var B=class r{constructor(o){this.http=o;this.mercadopago||this.initializeMercadoPago()}mercadopago;packagesCache=null;paymentMethodsCache=null;lastPackagesFetch=0;lastMethodsFetch=0;CACHE_DURATION=5*60*1e3;initializeMercadoPago(){this.mercadopago||(console.log("Inicializando Mercado Pago SDK (una sola vez)"),this.mercadopago={})}createMercadoPagoPreference(o){let e={packageId:o.packageId,frontendUrls:{success:`${window.location.origin}/payment-success`,failure:`${window.location.origin}/payment-failure`,pending:`${window.location.origin}/payment-pending`},payer:{},autoReturn:"approved",notificationUrl:`${_.apiUrl}api/payments/webhook`};return console.log("Enviando request con frontend URLs:",e),console.log("Dominio actual:",window.location.origin),console.log("Entorno:",_.production?"PRODUCCI\xD3N":"DESARROLLO"),this.http.post(`${_.apiUrl}api/payments/create-preference`,e).pipe(h(t=>{if(console.error("Error creando preferencia de Mercado Pago:",t),t.status===400)return console.warn("\u{1F527} MODO DESARROLLO: Simulando pago exitoso debido a error del backend"),new U(s=>{setTimeout(()=>{s.next({preferenceId:"dev_preference_"+Date.now(),initPoint:"https://www.mercadopago.com.ar/checkout/v1/redirect?pref_id=DEV_MODE",sandboxInitPoint:"https://www.mercadopago.com.ar/checkout/v1/redirect?pref_id=DEV_MODE",publicKey:"DEV_PUBLIC_KEY",status:"success",message:"Pago simulado para desarrollo",back_urls:{success:`${window.location.origin}/payment-success`,failure:`${window.location.origin}/payment-failure`,pending:`${window.location.origin}/payment-pending`},auto_return:"approved",notification_url:`${_.apiUrl}api/payments/webhook`}),s.complete()},2e3)});throw t}))}processMercadoPagoPayment(o){return new U(e=>{console.log("Procesando pago con Mercado Pago:",o),this.createMercadoPagoPreference(o).subscribe({next:t=>{if(console.log("=== PREFERENCIA CREADA ==="),console.log("Datos completos de la preferencia:",t),console.log("ID de preferencia:",t.preferenceId||t.id),console.log("URL de pago:",t.initPoint||t.init_point||t.paymentUrl),console.log("Public Key:",t.publicKey),console.log("Estado:",t.status),t.back_urls&&(console.log("=== BACK URLS ==="),console.log("Success URL:",t.back_urls.success),console.log("Failure URL:",t.back_urls.failure),console.log("Pending URL:",t.back_urls.pending)),t.auto_return&&console.log("Auto Return:",t.auto_return),t.notification_url&&console.log("Webhook URL:",t.notification_url),console.log("========================"),!t||!t.initPoint&&!t.init_point&&!t.paymentUrl){console.error("Respuesta inv\xE1lida del backend:",t),e.error(new Error("Error: El backend no devolvi\xF3 una URL de pago v\xE1lida. Verifica la configuraci\xF3n del servidor."));return}let s=t.initPoint||t.init_point||t.paymentUrl;s?(console.log("URL de pago obtenida:",s),s.includes("DEV_MODE")?(console.warn("\u{1F527} MODO DESARROLLO: Simulando pago exitoso"),setTimeout(()=>{e.next({id:t.preferenceId,status:"approved",paymentUrl:null,message:"Pago simulado exitosamente (modo desarrollo)",preferenceData:t})},3e3)):e.next({id:t.preferenceId||t.id,status:"pending",paymentUrl:s,message:"Preferencia creada exitosamente. Revisa los datos antes de continuar.",preferenceData:t})):e.next({id:t.preferenceId||t.id,status:"pending",paymentUrl:s,message:"Preferencia creada exitosamente. Revisa los datos antes de continuar.",preferenceData:t})},error:t=>{console.error("Error procesando pago con Mercado Pago:",t),e.error(t)}})})}getPackages(){let o=Date.now();return this.packagesCache&&o-this.lastPackagesFetch<this.CACHE_DURATION?(console.log("Usando paquetes desde cache"),S(this.packagesCache)):(console.log("Obteniendo paquetes desde servidor..."),this.http.get(`${_.apiUrl}api/payments/packages`).pipe(O(e=>{let t=e.map(s=>I(E({},s),{totalCoins:s.coinsAmount+s.bonusCoins,discountAmount:s.originalPrice?s.originalPrice-s.price:void 0}));return this.packagesCache=t,this.lastPackagesFetch=o,t}),h(e=>{throw console.error("Error fetching packages:",e),e})))}getPackage(o){return this.http.get(`${_.apiUrl}api/payments/packages/${o}`).pipe(O(e=>I(E({},e),{totalCoins:e.coinsAmount+e.bonusCoins,discountAmount:e.originalPrice?e.originalPrice-e.price:void 0})),h(e=>{throw console.error(`Error fetching package ${o}:`,e),e}))}getPopularPackages(){return this.http.get(`${_.apiUrl}api/payments/packages/popular`).pipe(O(o=>o.map(e=>I(E({},e),{totalCoins:e.coinsAmount+e.bonusCoins,discountAmount:e.originalPrice?e.originalPrice-e.price:void 0}))),h(o=>{throw console.error("Error fetching popular packages:",o),o}))}getBalance(o){return this.http.get(`${_.apiUrl}api/payments/balance/${o}`).pipe(O(e=>e.balance),h(e=>{throw console.error("Error fetching balance:",e),e}))}getTransactions(o){return this.http.get(`${_.apiUrl}api/payments/history/${o}`).pipe(h(e=>{throw console.error("Error fetching transactions:",e),e}))}getAccountStats(o){return this.http.get(`${_.apiUrl}api/payments/stats/${o}`).pipe(h(e=>{throw console.error("Error fetching account stats:",e),e}))}processPayment(o){return o.paymentMethod==="mercadopago"?this.processMercadoPagoPayment(o):this.http.post(`${_.apiUrl}api/payments/create-preference`,o).pipe(h(e=>{throw console.error("Error processing payment:",e),e}))}getPaymentMethods(){let o=Date.now();if(this.paymentMethodsCache&&o-this.lastMethodsFetch<this.CACHE_DURATION)return console.log("Usando m\xE9todos de pago desde cache"),S(this.paymentMethodsCache);console.log("Usando m\xE9todos de pago hardcodeados...");let e=[{id:"mercadopago",name:"Mercado Pago",icon:"assets/images/icons/mercadopago-icon.png",enabled:!0,description:"Pago seguro con Mercado Pago"},{id:"paypal",name:"PayPal",icon:"assets/images/icons/paypal-icon.png",enabled:!1,comingSoon:!0,description:"Pr\xF3ximamente disponible"}];return this.paymentMethodsCache=e,this.lastMethodsFetch=o,S(e)}clearCache(){this.packagesCache=null,this.paymentMethodsCache=null,this.lastPackagesFetch=0,this.lastMethodsFetch=0,console.log("Cache limpiado")}refreshPackages(){return this.packagesCache=null,this.lastPackagesFetch=0,this.getPackages()}refreshPaymentMethods(){return this.paymentMethodsCache=null,this.lastMethodsFetch=0,this.getPaymentMethods()}static \u0275fac=function(e){return new(e||r)(V(G))};static \u0275prov=L({token:r,factory:r.\u0275fac,providedIn:"root"})};function te(r,o){if(r&1&&(i(0,"div",19)(1,"i"),a(2,"\u26A0\uFE0F"),n(),a(3),n()),r&2){let e=d();c(3),g(" ",e.errorMessage," ")}}function ne(r,o){r&1&&(i(0,"div",46)(1,"i"),a(2,"\u2B50"),n(),a(3," M\xE1s Popular "),n())}function ie(r,o){if(r&1&&(i(0,"div",47),a(1),n()),r&2){let e=d().$implicit,t=d(3);c(),g(" -",t.getDiscountPercentage(e),"% ")}}function oe(r,o){if(r&1&&(i(0,"div",48)(1,"div",49)(2,"i",50),a(3,"\u2795"),n(),i(4,"span",51),a(5),f(6,"number"),n(),i(7,"span",52),a(8,"Bonus"),n()(),i(9,"div",53),a(10),n()()),r&2){let e=d().$implicit;c(5),g("+",u(6,2,e.bonusCoins),""),c(5),g("+",e.bonusPercentage,"%")}}function ae(r,o){if(r&1&&(i(0,"div",54),a(1),f(2,"number"),n()),r&2){let e=d().$implicit;c(),g(" $",u(2,1,e.originalPrice)," ")}}function re(r,o){if(r&1){let e=k();i(0,"div",24),P("click",function(){let s=C(e).$implicit,b=d(3);return v(b.selectPackage(s))}),p(1,ne,4,0,"div",25)(2,ie,2,1,"div",26),i(3,"div",27)(4,"h3",28),a(5),n(),i(6,"p",29),a(7),n()(),i(8,"div",30)(9,"div",31)(10,"div",32)(11,"i",33),a(12,"\u{1F4B0}"),n(),i(13,"span",34),a(14),f(15,"number"),n(),i(16,"span",35),a(17,"Coins"),n()(),p(18,oe,11,4,"div",36),n(),i(19,"div",37)(20,"div",38)(21,"span",39),a(22,"Total:"),n(),i(23,"span",40),a(24),f(25,"number"),n()()(),i(26,"div",41),p(27,ae,3,3,"div",42),i(28,"div",43),a(29),f(30,"number"),n()()(),i(31,"div",44)(32,"button",45)(33,"i"),a(34,"\u{1F6D2}"),n(),a(35," Seleccionar "),n()()()}if(r&2){let e=o.$implicit,t=d(3);w("popular",e.popular)("selected",(t.selectedPackage==null?null:t.selectedPackage.id)===e.id),c(),l("ngIf",e.popular),c(),l("ngIf",e.originalPrice&&e.originalPrice>e.price),c(3),m(e.name),c(2),m(e.description),c(7),m(u(15,14,e.coinsAmount)),c(4),l("ngIf",e.bonusCoins>0),c(6),g("",u(25,16,e.totalCoins)," Coins"),c(3),l("ngIf",e.originalPrice&&e.originalPrice>e.price),c(2),g(" $",u(30,18,e.price)," "),c(3),l("disabled",!e.active)}}function ce(r,o){if(r&1&&(i(0,"div",22),p(1,re,36,20,"div",23),n()),r&2){let e=d(2);c(),l("ngForOf",e.packages)}}function se(r,o){r&1&&(i(0,"div",55),M(1,"div",56),i(2,"p"),a(3,"Cargando paquetes..."),n()())}function le(r,o){if(r&1&&(i(0,"div",20),p(1,ce,2,1,"div",21)(2,se,4,0,"ng-template",null,0,z),n()),r&2){let e=R(3),t=d();c(),l("ngIf",!t.loadingPackages)("ngIfElse",e)}}function de(r,o){if(r&1&&(i(0,"div",61)(1,"h3"),a(2,"Paquete Seleccionado"),n(),i(3,"div",62)(4,"div",63)(5,"h4"),a(6),n(),i(7,"p"),a(8),f(9,"number"),n(),i(10,"p",64),a(11),f(12,"number"),n()()()()),r&2){let e=d(2);c(6),m(e.selectedPackage.name),c(2),g("",u(9,3,e.selectedPackage.totalCoins)," Coins"),c(3),g("$",u(12,5,e.selectedPackage.price),"")}}function pe(r,o){r&1&&(i(0,"i",77),a(1,"\u{1F4B3}"),n())}function me(r,o){r&1&&(i(0,"i",77),a(1,"\u{1F4B3}"),n())}function ge(r,o){if(r&1&&M(0,"img",78),r&2){let e=d().$implicit;l("src",e.icon,j)("alt",e.name)}}function fe(r,o){r&1&&(i(0,"div",79)(1,"i"),a(2,"\u23F0"),n(),a(3," Pr\xF3ximamente "),n())}function ue(r,o){r&1&&(i(0,"i",80),a(1,"\u2705"),n())}function _e(r,o){r&1&&(i(0,"i",81),a(1,"\u274C"),n())}function be(r,o){if(r&1){let e=k();i(0,"div",67),P("click",function(){let s=C(e).$implicit,b=d(3);return v(b.selectPaymentMethod(s))}),i(1,"div",68)(2,"div",69),p(3,pe,2,0,"i",70)(4,me,2,0,"i",70)(5,ge,1,2,"img",71),n(),i(6,"div",72)(7,"h4"),a(8),n(),i(9,"p"),a(10),n(),p(11,fe,4,0,"div",73),n(),i(12,"div",74),p(13,ue,2,0,"i",75)(14,_e,2,0,"i",76),n()()()}if(r&2){let e=o.$implicit,t=d(3);w("selected",t.isPaymentMethodSelected(e))("disabled",!e.enabled),c(3),l("ngIf",e.id==="mercadopago"),c(),l("ngIf",e.id==="paypal"),c(),l("ngIf",e.id!=="mercadopago"&&e.id!=="paypal"),c(3),m(e.name),c(2),m(e.description),c(),l("ngIf",e.comingSoon),c(2),l("ngIf",e.enabled),c(),l("ngIf",!e.enabled)}}function xe(r,o){if(r&1&&(i(0,"div",65),p(1,be,15,12,"div",66),n()),r&2){let e=d(2);c(),l("ngForOf",e.paymentMethods)}}function he(r,o){r&1&&(i(0,"div",55),M(1,"div",56),i(2,"p"),a(3,"Cargando m\xE9todos de pago..."),n()())}function Pe(r,o){if(r&1&&(i(0,"div",85)(1,"span"),a(2,"Bonus:"),n(),i(3,"span"),a(4),f(5,"number"),n()()),r&2){let e=d(3);c(4),g("+",u(5,1,e.selectedPackage.bonusCoins),"")}}function Ce(r,o){if(r&1&&(i(0,"div",82),M(1,"hr",83),i(2,"div",84)(3,"div",85)(4,"span"),a(5,"Paquete:"),n(),i(6,"span"),a(7),n()(),i(8,"div",85)(9,"span"),a(10,"Monedas Base:"),n(),i(11,"span"),a(12),f(13,"number"),n()(),p(14,Pe,6,3,"div",86),i(15,"div",87)(16,"span"),a(17,"Total Monedas:"),n(),i(18,"span"),a(19),f(20,"number"),n()(),i(21,"div",87)(22,"span"),a(23,"Precio Final:"),n(),i(24,"span"),a(25),f(26,"number"),n()(),i(27,"div",85)(28,"span"),a(29,"M\xE9todo de Pago:"),n(),i(30,"span"),a(31),n()()()()),r&2){let e=d(2);c(7),m(e.selectedPackage.name),c(5),m(u(13,6,e.selectedPackage.coinsAmount)),c(2),l("ngIf",e.selectedPackage.bonusCoins>0),c(5),m(u(20,8,e.selectedPackage.totalCoins)),c(6),g("$",u(26,10,e.selectedPackage.price),""),c(6),m(e.selectedPaymentMethod.name)}}function ve(r,o){if(r&1&&(i(0,"div",20),p(1,de,13,7,"div",57),i(2,"div",58)(3,"h3"),a(4,"Selecciona tu m\xE9todo de pago"),n(),p(5,xe,2,1,"div",59)(6,he,4,0,"ng-template",null,1,z),n(),p(8,Ce,32,12,"div",60),n()),r&2){let e=R(7),t=d();c(),l("ngIf",t.selectedPackage),c(4),l("ngIf",!t.loadingPaymentMethods)("ngIfElse",e),c(3),l("ngIf",t.selectedPackage&&t.selectedPaymentMethod)}}function ye(r,o){if(r&1&&(i(0,"div",94)(1,"span",95),a(2,"URL Sandbox:"),n(),i(3,"span",97),a(4),n()()),r&2){let e,t=d(2);c(4),m((e=t.getPreferenceInfo())==null?null:e.sandboxInitPoint)}}function Me(r,o){if(r&1&&(i(0,"div",94)(1,"span",95),a(2,"Auto Return:"),n(),i(3,"span",96),a(4),n()()),r&2){let e,t=d(3);c(4),m((e=t.getPreferenceInfo())==null?null:e.autoReturn)}}function ke(r,o){if(r&1&&(i(0,"div",94)(1,"span",95),a(2,"Webhook URL:"),n(),i(3,"span",97),a(4),n()()),r&2){let e,t=d(3);c(4),m((e=t.getPreferenceInfo())==null?null:e.notificationUrl)}}function Oe(r,o){if(r&1&&(i(0,"div",92)(1,"h4"),a(2,"\u2699\uFE0F Configuraci\xF3n"),n(),i(3,"div",93),p(4,Me,5,1,"div",98)(5,ke,5,1,"div",98),n()()),r&2){let e,t,s=d(2);c(4),l("ngIf",(e=s.getPreferenceInfo())==null?null:e.autoReturn),c(),l("ngIf",(t=s.getPreferenceInfo())==null?null:t.notificationUrl)}}function we(r,o){if(r&1&&(i(0,"div",92)(1,"h4"),a(2,"\u{1F517} URLs de Retorno"),n(),i(3,"div",93)(4,"div",94)(5,"span",95),a(6,"\u2705 Success URL:"),n(),i(7,"span",97),a(8),n()(),i(9,"div",94)(10,"span",95),a(11,"\u274C Failure URL:"),n(),i(12,"span",97),a(13),n()(),i(14,"div",94)(15,"span",95),a(16,"\u23F3 Pending URL:"),n(),i(17,"span",97),a(18),n()()()()),r&2){let e,t,s,b=d(2);c(8),m(((e=b.getPreferenceInfo())==null||e.backUrls==null?null:e.backUrls.success)||"N/A"),c(5),m(((t=b.getPreferenceInfo())==null||t.backUrls==null?null:t.backUrls.failure)||"N/A"),c(5),m(((s=b.getPreferenceInfo())==null||s.backUrls==null?null:s.backUrls.pending)||"N/A")}}function Ee(r,o){if(r&1){let e=k();i(0,"div",88)(1,"div",89)(2,"div",90)(3,"h3"),a(4,"\u{1F4CB} Informaci\xF3n de la Preferencia de Pago"),n(),i(5,"p"),a(6,"Revisa los datos antes de continuar con el pago"),n()(),i(7,"div",91)(8,"div",92)(9,"h4"),a(10,"\u{1F511} Datos B\xE1sicos"),n(),i(11,"div",93)(12,"div",94)(13,"span",95),a(14,"ID de Preferencia:"),n(),i(15,"span",96),a(16),n()(),i(17,"div",94)(18,"span",95),a(19,"Estado:"),n(),i(20,"span",96),a(21),n()(),i(22,"div",94)(23,"span",95),a(24,"Public Key:"),n(),i(25,"span",96),a(26),n()()()(),i(27,"div",92)(28,"h4"),a(29,"\u{1F517} URLs de Pago"),n(),i(30,"div",93)(31,"div",94)(32,"span",95),a(33,"URL Principal:"),n(),i(34,"span",97),a(35),n()(),p(36,ye,5,1,"div",98),n()(),p(37,Oe,6,2,"div",99)(38,we,19,3,"div",99),i(39,"div",92)(40,"h4"),a(41,"\u{1F4C4} Datos Completos (JSON)"),n(),i(42,"div",100)(43,"pre",101),a(44),f(45,"json"),n()()()(),i(46,"div",102)(47,"button",103),P("click",function(){C(e);let s=d();return v(s.cancelPreferenceReview())}),i(48,"i"),a(49,"\u274C"),n(),a(50," Cancelar "),n(),i(51,"button",104),P("click",function(){C(e);let s=d();return v(s.continueToPayment())}),i(52,"i"),a(53,"\u{1F4B3}"),n(),a(54," Continuar con el Pago "),n()()()()}if(r&2){let e,t,s,b,$,y,F,x=d();c(16),m(((e=x.getPreferenceInfo())==null?null:e.preferenceId)||"N/A"),c(5),m(((t=x.getPreferenceInfo())==null?null:t.status)||"N/A"),c(5),m(((s=x.getPreferenceInfo())==null?null:s.publicKey)||"N/A"),c(9),m(((b=x.getPreferenceInfo())==null?null:b.initPoint)||"N/A"),c(),l("ngIf",($=x.getPreferenceInfo())==null?null:$.sandboxInitPoint),c(),l("ngIf",((y=x.getPreferenceInfo())==null?null:y.backUrls)||((y=x.getPreferenceInfo())==null?null:y.autoReturn)||((y=x.getPreferenceInfo())==null?null:y.notificationUrl)),c(),l("ngIf",(F=x.getPreferenceInfo())==null?null:F.backUrls),c(6),m(u(45,8,x.preferenceData))}}function Ie(r,o){if(r&1){let e=k();i(0,"button",105),P("click",function(){C(e);let s=d();return v(s.goBack())}),i(1,"i"),a(2,"\u2B05\uFE0F"),n(),a(3," Volver "),n()}}function Se(r,o){r&1&&M(0,"div",109)}function De(r,o){r&1&&(i(0,"i"),a(1,"\u{1F4B3}"),n())}function Te(r,o){if(r&1){let e=k();i(0,"button",106),P("click",function(){C(e);let s=d();return v(s.confirmPurchase())}),p(1,Se,1,0,"div",107)(2,De,2,0,"i",108),a(3),n()}if(r&2){let e=d();l("disabled",e.processingPayment),c(),l("ngIf",e.processingPayment),c(),l("ngIf",!e.processingPayment),c(),g(" ",e.processingPayment?"Procesando...":"Confirmar Compra"," ")}}var X=class r{constructor(o){this.paymentService=o}loading=!1;packages=[];paymentMethods=[];selectedPackage=null;selectedPaymentMethod=null;currentStep=0;errorMessage="";loadingPackages=!1;loadingPaymentMethods=!1;processingPayment=!1;preferenceData=null;showPreferenceInfo=!1;destroy$=new A;ngOnInit(){this.loadPackages(),this.loadPaymentMethods()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadPackages(){if(this.loadingPackages){console.log("Ya se est\xE1n cargando paquetes, ignorando petici\xF3n adicional");return}this.loadingPackages=!0,this.errorMessage="",this.paymentService.getPackages().pipe(T(this.destroy$),D(()=>this.loadingPackages=!1)).subscribe({next:o=>{this.packages=o.filter(e=>e.active),console.log(`Paquetes cargados: ${this.packages.length} activos`)},error:o=>{console.error("Error loading packages:",o),this.errorMessage="Error al cargar los paquetes. Por favor, intenta nuevamente.",this.showMessage("Error al cargar los paquetes","error")}})}loadPaymentMethods(){if(this.loadingPaymentMethods){console.log("Ya se est\xE1n cargando m\xE9todos de pago, ignorando petici\xF3n adicional");return}this.loadingPaymentMethods=!0,this.paymentService.getPaymentMethods().pipe(T(this.destroy$),D(()=>this.loadingPaymentMethods=!1)).subscribe({next:o=>{this.paymentMethods=o,console.log(`M\xE9todos de pago cargados: ${o.length} disponibles`)},error:o=>{console.error("Error loading payment methods:",o),this.showMessage("Error al cargar m\xE9todos de pago","error")}})}selectPackage(o){this.selectedPackage=o,this.currentStep=1}selectPaymentMethod(o){o.enabled&&(this.selectedPaymentMethod=o)}goBack(){this.currentStep>0&&(this.currentStep--,this.currentStep===0&&(this.selectedPackage=null))}cancel(){this.selectedPackage=null,this.selectedPaymentMethod=null,this.currentStep=0,this.errorMessage="",this.showPreferenceInfo=!1,this.preferenceData=null}confirmPurchase(){if(!this.selectedPackage||!this.selectedPaymentMethod){this.showMessage("Por favor selecciona un paquete y m\xE9todo de pago","warning");return}if(this.processingPayment){console.log("Ya se est\xE1 procesando un pago, ignorando petici\xF3n adicional");return}this.processingPayment=!0,this.errorMessage="";let o={packageId:this.selectedPackage.id,paymentMethod:this.selectedPaymentMethod.id,amount:this.selectedPackage.price,totalCoins:this.selectedPackage.totalCoins};console.log("Procesando pago con packageId:",this.selectedPackage.id),console.log("Procesando pago:",o),this.paymentService.processPayment(o).pipe(T(this.destroy$),D(()=>this.processingPayment=!1)).subscribe({next:e=>{switch(console.log("Respuesta del pago:",e),e.status){case"approved":this.showMessage("Pago procesado correctamente","success"),this.cancel();break;case"pending":e.preferenceData?(this.preferenceData=e.preferenceData,this.showPreferenceInfo=!0,this.showMessage("Preferencia creada. Revisa los datos antes de continuar.","success")):this.showMessage("Pago en proceso...","success");break;default:this.showMessage("Pago procesado","success");break}},error:e=>{console.error("Error processing payment:",e);let t="Error al procesar el pago. Por favor, intenta nuevamente.";e.message&&e.message.includes("URL de pago v\xE1lida")?t="Error de configuraci\xF3n del servidor. Contacta al soporte t\xE9cnico.":e.error&&e.error.message?t=e.error.message:e.message?t=e.message:e.status===400?t="Error en la configuraci\xF3n del pago. Verifica los datos e intenta nuevamente.":e.status===500&&(t="Error del servidor. Intenta m\xE1s tarde."),this.errorMessage=t,this.showMessage(t,"error")}})}showMessage(o,e="success"){let t=document.createElement("div");t.className=`message-popup ${e}`,t.textContent=o,t.style.cssText=`
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 1rem 1.5rem;
      border-radius: 8px;
      color: white;
      font-weight: 600;
      z-index: 10000;
      animation: slideIn 0.3s ease-out;
      ${e==="error"?"background: linear-gradient(135deg, #ff4757 0%, #ff3742 100%);":e==="warning"?"background: linear-gradient(135deg, #ffa502 0%, #ff6348 100%);":"background: linear-gradient(135deg, #2ed573 0%, #1e90ff 100%);"}
    `,document.body.appendChild(t),setTimeout(()=>{t.style.animation="slideOut 0.3s ease-in",setTimeout(()=>{document.body.contains(t)&&document.body.removeChild(t)},300)},4e3)}getDiscountPercentage(o){return o.originalPrice&&o.originalPrice>o.price?Math.round((o.originalPrice-o.price)/o.originalPrice*100):0}isPaymentMethodSelected(o){return this.selectedPaymentMethod?.id===o.id}canContinue(){return this.currentStep===0?this.selectedPackage!==null:this.currentStep===1?this.selectedPaymentMethod!==null&&this.selectedPaymentMethod.enabled:!1}continueToPayment(){this.preferenceData&&this.preferenceData.initPoint?(console.log("Redirigiendo a Mercado Pago con URL:",this.preferenceData.initPoint),window.open(this.preferenceData.initPoint,"_blank"),this.showMessage("Redirigiendo a Mercado Pago...","success"),this.cancel()):this.preferenceData&&this.preferenceData.paymentUrl?(console.log("Redirigiendo a Mercado Pago con paymentUrl:",this.preferenceData.paymentUrl),window.open(this.preferenceData.paymentUrl,"_blank"),this.showMessage("Redirigiendo a Mercado Pago...","success"),this.cancel()):this.showMessage("Error: No se encontr\xF3 URL de pago v\xE1lida","error")}cancelPreferenceReview(){this.showPreferenceInfo=!1,this.preferenceData=null,this.showMessage("Revisi\xF3n cancelada","warning")}getPreferenceInfo(){return this.preferenceData?{preferenceId:this.preferenceData.preferenceId||this.preferenceData.id,initPoint:this.preferenceData.initPoint||this.preferenceData.init_point||this.preferenceData.paymentUrl,sandboxInitPoint:this.preferenceData.sandboxInitPoint,publicKey:this.preferenceData.publicKey,status:this.preferenceData.status,message:this.preferenceData.message,items:this.preferenceData.items,payer:this.preferenceData.payer,backUrls:this.preferenceData.back_urls,autoReturn:this.preferenceData.auto_return,notificationUrl:this.preferenceData.notification_url,expires:this.preferenceData.expires,collectorId:this.preferenceData.collector_id,clientId:this.preferenceData.client_id,marketplace:this.preferenceData.marketplace,marketplaceFee:this.preferenceData.marketplace_fee,differentialPricing:this.preferenceData.differential_pricing,binaryMode:this.preferenceData.binary_mode,expiresFrom:this.preferenceData.expires_from,expiresTo:this.preferenceData.expires_to}:null}static \u0275fac=function(e){return new(e||r)(N(B))};static \u0275cmp=q({type:r,selectors:[["app-buy-terra-coin"]],decls:31,vars:12,consts:[["loadingPackagesTpl",""],["loadingPaymentMethodsTpl",""],[1,"buy-terra-coin-container"],[1,"header-section"],[1,"main-title"],[1,"title-icon"],[1,"subtitle"],["class","error-message",4,"ngIf"],[1,"custom-stepper"],[1,"stepper-header"],[1,"step-indicator"],[1,"step-number"],[1,"step-label"],["class","step-content",4,"ngIf"],["class","preference-info-section",4,"ngIf"],[1,"navigation-buttons"],["class","back-button",3,"click",4,"ngIf"],[1,"cancel-button",3,"click"],["class","confirm-button",3,"disabled","click",4,"ngIf"],[1,"error-message"],[1,"step-content"],["class","packages-grid",4,"ngIf","ngIfElse"],[1,"packages-grid"],["class","package-card",3,"popular","selected","click",4,"ngFor","ngForOf"],[1,"package-card",3,"click"],["class","popular-badge",4,"ngIf"],["class","discount-badge",4,"ngIf"],[1,"package-header"],[1,"package-name"],[1,"package-description"],[1,"package-content"],[1,"coins-section"],[1,"coins-amount"],[1,"coin-icon"],[1,"coins-number"],[1,"coins-label"],["class","bonus-section",4,"ngIf"],[1,"total-section"],[1,"total-coins"],[1,"total-label"],[1,"total-number"],[1,"price-section"],["class","original-price",4,"ngIf"],[1,"current-price"],[1,"package-actions"],[1,"select-button",3,"disabled"],[1,"popular-badge"],[1,"discount-badge"],[1,"bonus-section"],[1,"bonus-amount"],[1,"bonus-icon"],[1,"bonus-number"],[1,"bonus-label"],[1,"bonus-percentage"],[1,"original-price"],[1,"loading-container"],[1,"spinner"],["class","selected-package-summary",4,"ngIf"],[1,"payment-methods-section"],["class","payment-methods-grid",4,"ngIf","ngIfElse"],["class","final-summary",4,"ngIf"],[1,"selected-package-summary"],[1,"summary-card"],[1,"summary-info"],[1,"summary-price"],[1,"payment-methods-grid"],["class","payment-method-card",3,"selected","disabled","click",4,"ngFor","ngForOf"],[1,"payment-method-card",3,"click"],[1,"payment-method-content"],[1,"payment-icon"],["class","payment-logo",4,"ngIf"],["class","payment-logo",3,"src","alt",4,"ngIf"],[1,"payment-info"],["class","coming-soon",4,"ngIf"],[1,"payment-status"],["class","enabled-icon",4,"ngIf"],["class","disabled-icon",4,"ngIf"],[1,"payment-logo"],[1,"payment-logo",3,"src","alt"],[1,"coming-soon"],[1,"enabled-icon"],[1,"disabled-icon"],[1,"final-summary"],[1,"divider"],[1,"summary-details"],[1,"summary-row"],["class","summary-row",4,"ngIf"],[1,"summary-row","total-row"],[1,"preference-info-section"],[1,"preference-card"],[1,"preference-header"],[1,"preference-content"],[1,"info-section"],[1,"info-grid"],[1,"info-item"],[1,"info-label"],[1,"info-value"],[1,"info-value","url-value"],["class","info-item",4,"ngIf"],["class","info-section",4,"ngIf"],[1,"json-container"],[1,"json-content"],[1,"preference-actions"],[1,"cancel-preference-button",3,"click"],[1,"continue-payment-button",3,"click"],[1,"back-button",3,"click"],[1,"confirm-button",3,"click","disabled"],["class","button-spinner",4,"ngIf"],[4,"ngIf"],[1,"button-spinner"]],template:function(e,t){e&1&&(i(0,"div",2)(1,"div",3)(2,"h1",4)(3,"i",5),a(4,"\u{1F4B0}"),n(),a(5," Comprar Terra Coins "),n(),i(6,"p",6),a(7,"Selecciona el paquete que mejor se adapte a tus necesidades"),n()(),p(8,te,4,1,"div",7),i(9,"div",8)(10,"div",9)(11,"div",10)(12,"span",11),a(13,"1"),n(),i(14,"span",12),a(15,"Seleccionar Paquete"),n()(),i(16,"div",10)(17,"span",11),a(18,"2"),n(),i(19,"span",12),a(20,"M\xE9todo de Pago"),n()()(),p(21,le,4,2,"div",13)(22,ve,9,4,"div",13),n(),p(23,Ee,55,10,"div",14),i(24,"div",15),p(25,Ie,4,0,"button",16),i(26,"button",17),P("click",function(){return t.cancel()}),i(27,"i"),a(28,"\u274C"),n(),a(29," Cancelar "),n(),p(30,Te,4,4,"button",18),n()()),e&2&&(c(8),l("ngIf",t.errorMessage),c(3),w("active",t.currentStep===0)("completed",t.currentStep>0),c(5),w("active",t.currentStep===1),c(5),l("ngIf",t.currentStep===0),c(),l("ngIf",t.currentStep===1),c(),l("ngIf",t.showPreferenceInfo&&t.preferenceData),c(2),l("ngIf",t.currentStep>0),c(5),l("ngIf",t.currentStep===1&&t.selectedPaymentMethod))},dependencies:[W,Y,K,H,J,Q],styles:['.buy-terra-coin-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:2rem;min-height:100vh;background:linear-gradient(135deg,#1a1a2e,#16213e,#0f3460);color:#fff}.header-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:3rem;animation:_ngcontent-%COMP%_fadeInDown .8s ease-out}.main-title[_ngcontent-%COMP%]{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;font-size:2.5rem;font-weight:700;text-transform:uppercase;color:#dabe64;margin-bottom:1rem;text-shadow:0 2px 4px rgba(0,0,0,.3);display:flex;align-items:center;justify-content:center;gap:1rem}.title-icon[_ngcontent-%COMP%]{font-size:2.5rem;filter:drop-shadow(0 2px 4px rgba(255,215,0,.3))}.subtitle[_ngcontent-%COMP%]{font-size:1.2rem;color:#b8b8b8;margin:0;font-weight:300}.error-message[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff4757,#ff3742);color:#fff;padding:1rem 1.5rem;border-radius:12px;margin-bottom:2rem;display:flex;align-items:center;gap:.5rem;box-shadow:0 4px 15px #ff47574d;animation:_ngcontent-%COMP%_shake .5s ease-in-out}.custom-stepper[_ngcontent-%COMP%]{background:#ffffff0d;border-radius:16px;padding:2rem;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.1);box-shadow:0 8px 32px #0000004d}.stepper-header[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:2rem;gap:2rem}.step-indicator[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.5rem;opacity:.5;transition:all .3s ease}.step-indicator.active[_ngcontent-%COMP%]{opacity:1}.step-indicator.completed[_ngcontent-%COMP%]{opacity:.8}.step-number[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:#ffffff1a;border:2px solid rgba(255,255,255,.3);display:flex;align-items:center;justify-content:center;font-weight:700;font-size:1.2rem;transition:all .3s ease}.step-indicator.active[_ngcontent-%COMP%]   .step-number[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dabe64,gold);border-color:#dabe64;color:#1a1a2e;box-shadow:0 0 20px #dabe6466}.step-indicator.completed[_ngcontent-%COMP%]   .step-number[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2ed573,#1e90ff);border-color:#2ed573;color:#fff}.step-label[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;color:#b8b8b8;text-align:center}.step-indicator.active[_ngcontent-%COMP%]   .step-label[_ngcontent-%COMP%]{color:#dabe64}.step-content[_ngcontent-%COMP%]{padding:2rem 0}.packages-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:2rem;margin-top:2rem}.package-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffffff1a,#ffffff0d);border:1px solid rgba(255,255,255,.1);border-radius:16px;padding:1.5rem;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.package-card[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:linear-gradient(135deg,#dabe641a,#ffd7000d);opacity:0;transition:opacity .3s ease;pointer-events:none}.package-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px);box-shadow:0 20px 40px #0006;border-color:#dabe644d}.package-card[_ngcontent-%COMP%]:hover:before{opacity:1}.package-card.selected[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dabe6433,#ffd7001a);border-color:#dabe64;box-shadow:0 0 30px #dabe644d;transform:translateY(-4px)}.package-card.popular[_ngcontent-%COMP%]{border-color:#ff6b6b;background:linear-gradient(135deg,#ff6b6b1a,#ff6b6b0d)}.popular-badge[_ngcontent-%COMP%]{position:absolute;top:-10px;right:-10px;background:linear-gradient(135deg,#ff6b6b,#ee5a52);color:#fff;padding:.5rem 1rem;border-radius:20px;font-size:.8rem;font-weight:600;display:flex;align-items:center;gap:.3rem;box-shadow:0 4px 15px #ff6b6b66;z-index:10}.discount-badge[_ngcontent-%COMP%]{position:absolute;top:1rem;left:1rem;background:linear-gradient(135deg,#2ed573,#1e90ff);color:#fff;padding:.4rem .8rem;border-radius:12px;font-size:.9rem;font-weight:700;box-shadow:0 4px 15px #2ed57366;z-index:10}.package-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem}.package-name[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;font-weight:700;margin-bottom:.5rem}.package-description[_ngcontent-%COMP%]{color:#b8b8b8;font-size:.9rem;margin:0}.package-content[_ngcontent-%COMP%]{margin-bottom:1.5rem}.coins-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1rem;margin-bottom:1.5rem}.coins-amount[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;background:linear-gradient(135deg,#ffd70033,#dabe641a);padding:1rem;border-radius:12px;border:1px solid rgba(255,215,0,.3)}.coin-icon[_ngcontent-%COMP%]{font-size:2rem;filter:drop-shadow(0 2px 4px rgba(255,215,0,.3))}.coins-number[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:gold;text-shadow:0 2px 4px rgba(0,0,0,.3)}.coins-label[_ngcontent-%COMP%]{font-size:1rem;color:#fff;font-weight:500}.bonus-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;background:linear-gradient(135deg,#2ed57333,#2ed5731a);padding:.8rem 1rem;border-radius:12px;border:1px solid rgba(46,213,115,.3)}.bonus-amount[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.3rem}.bonus-icon[_ngcontent-%COMP%]{font-size:1.2rem}.bonus-number[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700;color:#2ed573}.bonus-label[_ngcontent-%COMP%]{font-size:.9rem;color:#fff}.bonus-percentage[_ngcontent-%COMP%]{background:#2ed573;color:#fff;padding:.3rem .6rem;border-radius:8px;font-size:.8rem;font-weight:700}.total-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem}.total-coins[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background:#ffffff1a;padding:1rem;border-radius:12px;border:1px solid rgba(255,255,255,.2)}.total-label[_ngcontent-%COMP%]{font-size:1rem;color:#b8b8b8}.total-number[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700;color:#fff}.price-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem}.original-price[_ngcontent-%COMP%]{font-size:1rem;color:#b8b8b8;text-decoration:line-through;margin-bottom:.5rem}.current-price[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#dabe64;text-shadow:0 2px 4px rgba(0,0,0,.3)}.package-actions[_ngcontent-%COMP%]{text-align:center}.select-button[_ngcontent-%COMP%]{width:100%;background:linear-gradient(135deg,#dabe64,gold);color:#1a1a2e;font-weight:700;padding:1rem;border-radius:12px;border:none;font-size:1.1rem;transition:all .3s ease;box-shadow:0 4px 15px #dabe644d;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:.5rem}.select-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #dabe6466}.select-button[_ngcontent-%COMP%]:disabled{background:#ffffff1a;color:#666;cursor:not-allowed;transform:none;box-shadow:none}.payment-methods-section[_ngcontent-%COMP%]{margin-top:2rem}.payment-methods-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;margin-bottom:1.5rem;text-align:center}.payment-methods-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1.5rem}.payment-method-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffffff1a,#ffffff0d);border:1px solid rgba(255,255,255,.1);border-radius:12px;cursor:pointer;transition:all .3s ease;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.payment-method-card[_ngcontent-%COMP%]:hover:not(.disabled){transform:translateY(-4px);box-shadow:0 15px 30px #0000004d;border-color:#fff3}.payment-method-card.selected[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2ed57333,#2ed5731a);border-color:#2ed573;box-shadow:0 0 20px #2ed5734d}.payment-method-card.disabled[_ngcontent-%COMP%]{opacity:.6;cursor:not-allowed}.payment-method-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1.5rem}.payment-icon[_ngcontent-%COMP%]{width:60px;height:60px;display:flex;align-items:center;justify-content:center}.payment-logo[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;font-size:2.5rem;color:#dabe64}.payment-info[_ngcontent-%COMP%]{flex:1}.payment-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;font-size:1.2rem;margin-bottom:.5rem}.payment-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#b8b8b8;font-size:.9rem;margin:0}.coming-soon[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.3rem;color:orange;font-size:.8rem;font-weight:600;margin-top:.5rem}.payment-status[_ngcontent-%COMP%]{display:flex;align-items:center}.enabled-icon[_ngcontent-%COMP%]{color:#2ed573;font-size:1.5rem}.disabled-icon[_ngcontent-%COMP%]{color:#ff4757;font-size:1.5rem}.selected-package-summary[_ngcontent-%COMP%]{margin-bottom:2rem}.selected-package-summary[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;font-size:1.3rem;margin-bottom:1rem;text-align:center}.summary-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dabe641a,#ffd7000d);border:1px solid rgba(218,190,100,.3);border-radius:12px;padding:1.5rem;text-align:center}.summary-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#dabe64;font-size:1.2rem;margin-bottom:.5rem}.summary-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;margin:.3rem 0}.summary-price[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#dabe64}.final-summary[_ngcontent-%COMP%]{margin-top:2rem;padding:1.5rem;background:#ffffff0d;border-radius:12px;border:1px solid rgba(255,255,255,.1)}.divider[_ngcontent-%COMP%]{border:none;height:1px;background:#fff3;margin:1rem 0}.summary-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.8rem}.summary-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.5rem 0}.summary-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{color:#b8b8b8;font-weight:500}.summary-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{color:#fff;font-weight:600}.total-row[_ngcontent-%COMP%]{border-top:1px solid rgba(255,255,255,.1);padding-top:1rem;margin-top:.5rem;font-size:1.1rem;font-weight:700}.total-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{color:#dabe64}.navigation-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:2rem;padding:1rem 0;gap:1rem}.back-button[_ngcontent-%COMP%], .cancel-button[_ngcontent-%COMP%]{color:#b8b8b8;border:1px solid rgba(255,255,255,.2);background:#ffffff0d;padding:.8rem 1.5rem;border-radius:8px;transition:all .3s ease;cursor:pointer;display:flex;align-items:center;gap:.5rem;font-size:1rem}.back-button[_ngcontent-%COMP%]:hover, .cancel-button[_ngcontent-%COMP%]:hover{background:#ffffff1a;color:#fff;border-color:#ffffff4d}.confirm-button[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2ed573,#1e90ff);color:#fff;font-weight:700;padding:1rem 2rem;border-radius:12px;border:none;font-size:1.1rem;transition:all .3s ease;box-shadow:0 4px 15px #2ed5734d;display:flex;align-items:center;gap:.5rem;cursor:pointer}.confirm-button[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 25px #2ed57366}.confirm-button[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed;transform:none}.button-spinner[_ngcontent-%COMP%]{width:20px;height:20px;border:2px solid rgba(255,255,255,.3);border-top:2px solid white;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:3rem;gap:1rem}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#b8b8b8;font-size:1rem}.spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:3px solid rgba(255,255,255,.3);border-top:3px solid #dabe64;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.message-popup[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;padding:1rem 1.5rem;border-radius:8px;color:#fff;font-weight:600;z-index:10000;animation:_ngcontent-%COMP%_slideIn .3s ease-out}@keyframes _ngcontent-%COMP%_fadeInDown{0%{opacity:0;transform:translateY(-30px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}25%{transform:translate(-5px)}75%{transform:translate(5px)}}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translate(100%)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_slideOut{0%{opacity:1;transform:translate(0)}to{opacity:0;transform:translate(100%)}}@media (max-width: 768px){.buy-terra-coin-container[_ngcontent-%COMP%]{padding:1rem}.main-title[_ngcontent-%COMP%]{font-size:2rem;flex-direction:column;gap:.5rem}.title-icon[_ngcontent-%COMP%]{font-size:2rem}.custom-stepper[_ngcontent-%COMP%]{padding:1rem}.stepper-header[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.packages-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}.payment-methods-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.navigation-buttons[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.back-button[_ngcontent-%COMP%], .cancel-button[_ngcontent-%COMP%], .confirm-button[_ngcontent-%COMP%]{width:100%}.coins-amount[_ngcontent-%COMP%], .bonus-section[_ngcontent-%COMP%], .payment-method-content[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.payment-status[_ngcontent-%COMP%]{margin-top:1rem}}@media (max-width: 480px){.main-title[_ngcontent-%COMP%]{font-size:1.5rem}.package-card[_ngcontent-%COMP%]{padding:1rem}.coins-number[_ngcontent-%COMP%], .current-price[_ngcontent-%COMP%]{font-size:1.5rem}.summary-details[_ngcontent-%COMP%]{font-size:.9rem}}  .success-snackbar{background:linear-gradient(135deg,#2ed573,#1e90ff);color:#fff}  .error-snackbar{background:linear-gradient(135deg,#ff4757,#ff3742);color:#fff}  .warning-snackbar{background:linear-gradient(135deg,#ffa502,#ff6348);color:#fff}.preference-info-section[_ngcontent-%COMP%]{margin-top:2rem;animation:_ngcontent-%COMP%_slideInUp .4s ease-out}.preference-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);border-radius:20px;padding:2rem;box-shadow:0 20px 40px #0000001a;border:2px solid rgba(255,255,255,.1)}.preference-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem;color:#fff}.preference-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;margin-bottom:.5rem;text-shadow:0 2px 4px rgba(0,0,0,.3)}.preference-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;opacity:.9;margin:0}.preference-content[_ngcontent-%COMP%]{background:#fffffff2;border-radius:15px;padding:1.5rem;margin-bottom:1.5rem}.info-section[_ngcontent-%COMP%]{margin-bottom:2rem}.info-section[_ngcontent-%COMP%]:last-child{margin-bottom:0}.info-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;color:#333;margin-bottom:1rem;padding-bottom:.5rem;border-bottom:2px solid #e0e0e0}.info-grid[_ngcontent-%COMP%]{display:grid;gap:1rem}.info-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.75rem;background:#f8f9fa;border-radius:8px;border-left:4px solid #667eea}.info-label[_ngcontent-%COMP%]{font-weight:600;color:#555;min-width:150px}.info-value[_ngcontent-%COMP%]{font-family:Courier New,monospace;font-size:.9rem;color:#333;word-break:break-all;text-align:right;max-width:60%}.url-value[_ngcontent-%COMP%]{color:#007bff;text-decoration:underline;cursor:pointer}.url-value[_ngcontent-%COMP%]:hover{color:#0056b3}.json-container[_ngcontent-%COMP%]{background:#2d3748;border-radius:8px;padding:1rem;max-height:300px;overflow-y:auto}.json-content[_ngcontent-%COMP%]{color:#e2e8f0;font-family:Courier New,monospace;font-size:.85rem;line-height:1.4;margin:0;white-space:pre-wrap;word-break:break-all}.preference-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:center}.cancel-preference-button[_ngcontent-%COMP%], .continue-payment-button[_ngcontent-%COMP%]{padding:1rem 2rem;border:none;border-radius:12px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;gap:.5rem;min-width:180px;justify-content:center}.cancel-preference-button[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b6b,#ee5a52);color:#fff;box-shadow:0 4px 15px #ff6b6b4d}.cancel-preference-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #ff6b6b66}.continue-payment-button[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2ed573,#1e90ff);color:#fff;box-shadow:0 4px 15px #2ed5734d}.continue-payment-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #2ed57366}@keyframes _ngcontent-%COMP%_slideInUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 768px){.preference-card[_ngcontent-%COMP%]{padding:1.5rem}.preference-content[_ngcontent-%COMP%]{padding:1rem}.info-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.5rem}.info-label[_ngcontent-%COMP%]{min-width:auto}.info-value[_ngcontent-%COMP%]{max-width:100%;text-align:left}.preference-actions[_ngcontent-%COMP%]{flex-direction:column}.cancel-preference-button[_ngcontent-%COMP%], .continue-payment-button[_ngcontent-%COMP%]{width:100%}}']})};export{X as BuyTerraCoinComponent};
