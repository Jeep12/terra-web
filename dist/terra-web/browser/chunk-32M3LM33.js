import{b as w,c as x,d as y,e as M,h as S,j as F,k as O,r as I,t as k}from"./chunk-XISZG6EA.js";import{a as P}from"./chunk-SOCMIHFP.js";import{d as b,i as v,t as C}from"./chunk-XMHOOZ4U.js";import{Cb as s,Eb as u,Oa as l,Sa as h,Ta as p,Ya as _,bb as c,jb as d,ob as o,pb as n,qb as a,wb as f,xb as g}from"./chunk-IYZISLN6.js";function T(t,i){if(t&1&&(o(0,"div",17)(1,"div",18),a(2,"i",19),s(3),n()()),t&2){let e=g();l(3),u(" ",e.responseMessage," ")}}function N(t,i){t&1&&(o(0,"span"),s(1,"Email is required"),n())}function R(t,i){t&1&&(o(0,"span"),s(1,"Please enter a valid email"),n())}function z(t,i){if(t&1&&(o(0,"div",20),c(1,N,2,0,"span",21)(2,R,2,0,"span",21),n()),t&2){let e,r,m=g();l(),d("ngIf",(e=m.forgotPasswordForm.get("email"))==null||e.errors==null?null:e.errors.required),l(),d("ngIf",(r=m.forgotPasswordForm.get("email"))==null||r.errors==null?null:r.errors.email)}}function G(t,i){t&1&&(o(0,"div",25),a(1,"div",26),n())}function j(t,i){if(t&1&&(o(0,"button",22),c(1,G,2,0,"div",23),a(2,"i",24),s(3),n()),t&2){let e=g();d("disabled",e.forgotPasswordForm.invalid||e.loading),l(),d("ngIf",e.loading),l(2),u(" ",e.loading?"":"Send reset email"," ")}}function A(t,i){t&1&&(o(0,"div",27)(1,"div",28),a(2,"i",29),n(),o(3,"h3"),s(4,"Email sent!"),n(),o(5,"p"),s(6,"Check your inbox for the reset link."),n(),o(7,"p",30),a(8,"i",31),s(9," Check your spam folder if you don't see it."),n()())}var E=class t{constructor(i,e,r,m){this.fb=i;this.router=e;this.authService=r;this.renderer=m;this.forgotPasswordForm=this.fb.group({email:["",[x.required,x.email]]})}forgotPasswordForm;emailSent=!1;responseMessage="";loading=!1;ngOnInit(){let i=document.querySelector(".auth-container"),e=localStorage.getItem("theme");i&&(e==="dark"?this.renderer.addClass(i,"dark-mode"):this.renderer.removeClass(i,"dark-mode"))}sendResetEmail(){if(this.forgotPasswordForm.valid){this.loading=!0;let i=this.forgotPasswordForm.get("email")?.value;this.authService.recoveryPassword(i).subscribe({next:e=>{this.emailSent=!0,this.responseMessage=e.message||"Check your inbox for the reset link.",this.forgotPasswordForm.reset(),this.loading=!1},error:e=>{this.emailSent=!1,this.responseMessage=e.error?.message||"Error sending reset email, try again later.",this.loading=!1}})}else this.forgotPasswordForm.markAllAsTouched()}navigateToLogin(){this.router.navigate(["/login"])}static \u0275fac=function(e){return new(e||t)(p(I),p(C),p(P),p(h))};static \u0275cmp=_({type:t,selectors:[["app-forgot-password"]],decls:23,vars:5,consts:[[1,"auth-container"],[1,"auth-card"],[1,"auth-title"],[1,"fas","fa-unlock-alt"],[1,"auth-subtitle"],[1,"far","fa-envelope-open"],["class","response-message",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","email"],[1,"fas","fa-envelope"],["type","email","id","email","formControlName","email","placeholder","Enter your email",1,"form-control"],["class","error-message",4,"ngIf"],["type","submit","class","btn-primary",3,"disabled",4,"ngIf"],["type","button",1,"btn-secondary",3,"click"],[1,"fas","fa-arrow-left"],["class","success-message",4,"ngIf"],[1,"response-message"],["role","alert",1,"alert","alert-danger"],[1,"fas","fa-exclamation-triangle","text-danger"],[1,"error-message"],[4,"ngIf"],["type","submit",1,"btn-primary",3,"disabled"],["class","loading-container",4,"ngIf"],[1,"fas","fa-paper-plane"],[1,"loading-container"],[1,"loading-bar"],[1,"success-message"],[1,"success-icon"],[1,"fas","fa-check-circle"],[1,"small-text"],[1,"fas","fa-info-circle"]],template:function(e,r){if(e&1&&(o(0,"div",0)(1,"div",1)(2,"h2",2),a(3,"i",3),s(4," Forgot Password"),n(),o(5,"p",4),a(6,"i",5),s(7," Enter your email address and we'll send you a reset link. "),n(),c(8,T,4,1,"div",6),o(9,"form",7),f("ngSubmit",function(){return r.sendResetEmail()}),o(10,"div",8)(11,"label",9),a(12,"i",10),s(13," Email address"),n(),a(14,"input",11),c(15,z,3,2,"div",12),n(),c(16,j,4,3,"button",13),a(17,"hr"),o(18,"button",14),f("click",function(){return r.navigateToLogin()}),a(19,"i",15),s(20," Back to login "),n()(),a(21,"br"),c(22,A,10,0,"div",16),n()()),e&2){let m;l(8),d("ngIf",r.responseMessage&&!r.emailSent),l(),d("formGroup",r.forgotPasswordForm),l(6),d("ngIf",((m=r.forgotPasswordForm.get("email"))==null?null:m.invalid)&&((m=r.forgotPasswordForm.get("email"))==null?null:m.touched)),l(),d("ngIf",!r.emailSent),l(6),d("ngIf",r.emailSent)}},dependencies:[v,b,k,S,w,y,M,F,O],styles:[".auth-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;padding:20px;background:linear-gradient(to bottom,#0c0f20,#000);font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.auth-card[_ngcontent-%COMP%]{background-color:#ffffff0d;border-radius:12px;padding:30px;width:100%;max-width:400px;box-shadow:0 8px 32px #0000004d;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.1)}.auth-title[_ngcontent-%COMP%]{color:#fff;text-align:center;margin-bottom:10px;font-weight:600;font-size:24px}.auth-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:10px}.auth-subtitle[_ngcontent-%COMP%]{color:#ffffffb3;text-align:center;margin-bottom:30px;font-size:14px;line-height:1.5}.auth-subtitle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;color:#e0e0e0;font-size:14px}label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px;width:16px;text-align:center}.form-control[_ngcontent-%COMP%]{width:100%;height:40px;border-radius:8px;border:1px solid rgba(255,255,255,.2);background-color:#ffffff12;color:#fff;font-size:16px;transition:all .3s ease;padding:0 12px}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#dabe6480;box-shadow:0 0 0 2px #dabe6440}.form-control[_ngcontent-%COMP%]::placeholder{color:#fff6}.error-message[_ngcontent-%COMP%]{color:#ff6b6b;font-size:12px;margin-top:5px}.success-message[_ngcontent-%COMP%]{text-align:center;color:#fff;animation:fadeIn .5s ease-in-out}.success-icon[_ngcontent-%COMP%]{width:60px;height:60px;background:linear-gradient(to right,#746535,#dabe64);border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 20px;font-size:30px;color:#0c0f20}.success-message[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:10px;font-size:20px}.success-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ffffffb3;margin-bottom:10px}.small-text[_ngcontent-%COMP%]{font-size:12px;opacity:.7}.small-text[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px}@media (max-width: 480px){.auth-card[_ngcontent-%COMP%]{padding:20px}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%], .form-control[_ngcontent-%COMP%]{padding:10px}}.auth-container.dark-mode[_ngcontent-%COMP%]{background:linear-gradient(to bottom,#121212,#000);color:#ddd}"]})};export{E as ForgotPasswordComponent};
