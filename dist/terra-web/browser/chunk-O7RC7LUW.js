import{b as k,c as u,d as V,e as S,h as R,j as E,k as F,r as I,t as q}from"./chunk-HGP4KLVB.js";import{b as C,c as _,d as v,f as x,m as y,o as M,t as O}from"./chunk-7UGINRBL.js";import{$a as t,Aa as i,Ea as b,Fa as m,Ka as w,Pa as g,Wa as l,Ya as p,ab as n,bb as r,hb as f,ib as P,kb as a,mb as h}from"./chunk-M7WLSMAB.js";function N(d,o){if(d&1&&(t(0,"li"),r(1,"i",33),a(2),n()),d&2){let s=o.$implicit;i(2),h(" ",s,"")}}function T(d,o){if(d&1&&(t(0,"div",31)(1,"ul"),g(2,N,3,1,"li",32),n()()),d&2){let s=P();i(2),l("ngForOf",s.errors)}}function z(d,o){d&1&&(t(0,"div",34),r(1,"div",35),n())}var A=class d{constructor(o,s,e,c,j){this.fb=o;this.authService=s;this.route=e;this.router=c;this.renderer=j;this.resetForm=this.fb.group({password:["",[u.required,u.minLength(8)]],confirmPassword:["",[u.required]]}),this.resetForm.get("password")?.valueChanges.subscribe(()=>{this.onPasswordChange()}),this.resetForm.get("confirmPassword")?.valueChanges.subscribe(()=>{this.onPasswordChange()})}errors=[];resetForm;passwordVisible=!1;repeatPasswordVisible=!1;loading=!1;tokenUser=null;passwordValidations={length:!1,uppercase:!1,specialChar:!1,number:!1,match:!1};ngOnInit(){let o=document.querySelector(".auth-container"),s=localStorage.getItem("theme");o&&(s==="dark"?this.renderer.addClass(o,"dark-mode"):this.renderer.removeClass(o,"dark-mode")),this.route.queryParams.subscribe(e=>{this.tokenUser=e.token})}onPasswordChange(){let o=this.resetForm.get("password")?.value,s=this.resetForm.get("confirmPassword")?.value;this.passwordValidations.length=o?.length>=8,this.passwordValidations.uppercase=/[A-Z]/.test(o),this.passwordValidations.specialChar=/[!@#$%^&*(),.?":{}|<>]/.test(o),this.passwordValidations.number=/\d/.test(o),this.passwordValidations.match=o===s}onSubmit(){if(!this.tokenUser){this.errors=["Invalid token."];return}let{password:o,confirmPassword:s}=this.resetForm.value;if(o!==s){this.errors=["Passwords do not match."];return}this.resetForm.valid&&this.tokenUser?(this.loading=!0,this.errors=[],this.authService.resetPassword(this.tokenUser,o).subscribe(e=>{e.success===!1?this.errors=[e.message]:new bootstrap.Modal(document.getElementById("successModal")).show(),this.loading=!1},e=>{this.errors=[e.error?.message||"An error occurred. Please try again."],this.loading=!1})):this.errors=["Please fill all required fields correctly."]}togglePasswordVisibility(){this.passwordVisible=!this.passwordVisible}toggleRepeatPasswordVisibility(){this.repeatPasswordVisible=!this.repeatPasswordVisible}isPasswordValid(){return this.passwordValidations.length&&this.passwordValidations.uppercase&&this.passwordValidations.specialChar&&this.passwordValidations.number&&this.passwordValidations.match}goBack(){this.router.navigate(["/login"])}static \u0275fac=function(s){return new(s||d)(m(I),m(O),m(y),m(M),m(b))};static \u0275cmp=w({type:d,selectors:[["app-reset-password"]],decls:66,vars:34,consts:[[1,"auth-container"],[1,"auth-card"],[1,"auth-title"],[1,"fas","fa-key"],[1,"auth-subtitle"],[1,"fas","fa-lock"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","password"],[1,"password-input-container"],["type","password","formControlName","password","id","password","placeholder","Enter your new password",1,"form-control",3,"input","type"],["type","button",1,"password-toggle",3,"click"],[1,"fas",3,"ngClass"],["for","confirmPassword"],["type","password","formControlName","confirmPassword","id","confirmPassword","placeholder","Confirm your new password",1,"form-control",3,"type"],["class","error-message",4,"ngIf"],[1,"password-requirements"],[1,"requirement"],["type","submit",1,"btn-primary",3,"disabled"],["class","loading-container",4,"ngIf"],[1,"fas","fa-check-circle"],["type","button",1,"btn-secondary",3,"click"],[1,"fas","fa-arrow-left"],["id","successModal","tabindex","-1","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content","auth-modal"],[1,"modal-header"],[1,"success-icon"],[1,"modal-body","text-center"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn-secondary"],[1,"error-message"],[4,"ngFor","ngForOf"],[1,"fas","fa-exclamation-circle"],[1,"loading-container"],[1,"loading-bar"]],template:function(s,e){s&1&&(t(0,"div",0)(1,"div",1)(2,"h2",2),r(3,"i",3),a(4," Reset Password"),n(),t(5,"p",4),r(6,"i",5),a(7," Enter your new password and confirm it. "),n(),t(8,"form",6),f("ngSubmit",function(){return e.onSubmit()}),t(9,"div",7)(10,"label",8),r(11,"i",5),a(12," New Password"),n(),t(13,"div",9)(14,"input",10),f("input",function(){return e.onPasswordChange()}),n(),t(15,"button",11),f("click",function(){return e.togglePasswordVisibility()}),r(16,"i",12),n()()(),t(17,"div",7)(18,"label",13),r(19,"i",5),a(20," Confirm Password"),n(),t(21,"div",9),r(22,"input",14),t(23,"button",11),f("click",function(){return e.toggleRepeatPasswordVisibility()}),r(24,"i",12),n()()(),g(25,T,3,1,"div",15),t(26,"div",16)(27,"h4"),a(28,"Password Requirements:"),n(),t(29,"div",17),r(30,"i",12),a(31," At least 8 characters "),n(),t(32,"div",17),r(33,"i",12),a(34," At least one uppercase letter "),n(),t(35,"div",17),r(36,"i",12),a(37," At least one special character "),n(),t(38,"div",17),r(39,"i",12),a(40," At least one number "),n(),t(41,"div",17),r(42,"i",12),a(43," Passwords match "),n()(),t(44,"button",18),g(45,z,2,0,"div",19),r(46,"i",20),a(47),n(),r(48,"hr"),t(49,"button",21),f("click",function(){return e.goBack()}),r(50,"i",22),a(51," Back to login "),n()()()(),t(52,"div",23)(53,"div",24)(54,"div",25)(55,"div",26)(56,"div",27),r(57,"i",20),n()(),t(58,"div",28)(59,"h3"),a(60,"Password Reset Successfully!"),n(),t(61,"p"),a(62,"You can now login with your new password."),n()(),t(63,"div",29)(64,"button",30),a(65,"Close"),n()()()()()),s&2&&(i(8),l("formGroup",e.resetForm),i(6),l("type",e.passwordVisible?"text":"password"),i(2),l("ngClass",e.passwordVisible?"fa-eye-slash":"fa-eye"),i(6),l("type",e.repeatPasswordVisible?"text":"password"),i(2),l("ngClass",e.repeatPasswordVisible?"fa-eye-slash":"fa-eye"),i(),l("ngIf",e.errors.length>0),i(4),p("valid",e.passwordValidations.length)("invalid",!e.passwordValidations.length),i(),l("ngClass",e.passwordValidations.length?"fa-check-circle":"fa-times-circle"),i(2),p("valid",e.passwordValidations.uppercase)("invalid",!e.passwordValidations.uppercase),i(),l("ngClass",e.passwordValidations.uppercase?"fa-check-circle":"fa-times-circle"),i(2),p("valid",e.passwordValidations.specialChar)("invalid",!e.passwordValidations.specialChar),i(),l("ngClass",e.passwordValidations.specialChar?"fa-check-circle":"fa-times-circle"),i(2),p("valid",e.passwordValidations.number)("invalid",!e.passwordValidations.number),i(),l("ngClass",e.passwordValidations.number?"fa-check-circle":"fa-times-circle"),i(2),p("valid",e.passwordValidations.match)("invalid",!e.passwordValidations.match),i(),l("ngClass",e.passwordValidations.match?"fa-check-circle":"fa-times-circle"),i(2),l("disabled",!e.resetForm.valid||e.loading),i(),l("ngIf",e.loading),i(2),h(" ",e.loading?"":"Reset Password"," "))},dependencies:[q,R,k,V,S,E,F,x,C,_,v],styles:['.auth-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;padding:20px;background:linear-gradient(to bottom,#0c0f20,#000);font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.auth-card[_ngcontent-%COMP%]{background-color:#ffffff0d;border-radius:12px;padding:30px;width:100%;max-width:400px;box-shadow:0 8px 32px #0000004d;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.1)}.auth-title[_ngcontent-%COMP%]{color:#fff;text-align:center;margin-bottom:10px;font-weight:600;font-size:24px}.auth-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:10px}.auth-subtitle[_ngcontent-%COMP%]{color:#ffffffb3;text-align:center;margin-bottom:30px;font-size:14px;line-height:1.5}.auth-subtitle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;color:#e0e0e0;font-size:14px}label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px;width:16px;text-align:center}.form-control[_ngcontent-%COMP%]{width:100%;height:40px;border-radius:8px;border:1px solid rgba(255,255,255,.2);background-color:#ffffff12;color:#fff;font-size:16px;transition:all .3s ease;padding:0 12px}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#dabe6480;box-shadow:0 0 0 2px #dabe6440}.form-control[_ngcontent-%COMP%]::placeholder{color:#fff6}.loading-container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;height:4px;overflow:hidden}.loading-bar[_ngcontent-%COMP%]{background-color:#0c0f204d;min-width:100%;min-height:4px;position:relative;overflow:hidden}.loading-bar[_ngcontent-%COMP%]:after{content:"";min-height:4px;position:absolute;background:linear-gradient(to right,#dabe64cc,#fffc);transform:translate(-100%);animation:_ngcontent-%COMP%_loadingAnim 2s infinite}.loading-bar[_ngcontent-%COMP%]:before{content:"";min-height:4px;position:absolute;background:linear-gradient(to right,#dabe64cc,#fffc);transform:translate(-100%);animation:_ngcontent-%COMP%_loadingAnim 2s infinite;animation-delay:1s}@keyframes _ngcontent-%COMP%_loadingAnim{0%{transform:translate(-150%);min-width:100px}to{transform:translate(300%);min-width:400px}}.error-message[_ngcontent-%COMP%]{color:#ff6b6b;font-size:12px;margin-top:5px}.success-message[_ngcontent-%COMP%]{text-align:center;color:#fff;animation:_ngcontent-%COMP%_fadeIn .5s ease-in-out}.success-icon[_ngcontent-%COMP%]{width:60px;height:60px;background:linear-gradient(to right,#746535,#dabe64);border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 20px;font-size:30px;color:#0c0f20}.success-message[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:10px;font-size:20px}.success-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ffffffb3;margin-bottom:10px}.small-text[_ngcontent-%COMP%]{font-size:12px;opacity:.7}.small-text[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 480px){.auth-card[_ngcontent-%COMP%]{padding:20px}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%], .form-control[_ngcontent-%COMP%]{padding:10px}}.password-requirements[_ngcontent-%COMP%]{margin:20px 0;padding:15px;background-color:#ffffff0d;border-radius:8px;border:1px solid rgba(255,255,255,.1)}.password-requirements[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#dabe64;margin-bottom:10px;font-size:14px;text-transform:uppercase}.requirement[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:8px;font-size:13px;color:#ffffffb3}.requirement[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px;width:16px}.requirement.valid[_ngcontent-%COMP%]{color:#4caf50}.requirement.invalid[_ngcontent-%COMP%]{color:#ffffff80}.requirement.valid[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#4caf50}.requirement.invalid[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#f44336}.auth-modal[_ngcontent-%COMP%]{background-color:#ffffff0d;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.1);color:#fff}.auth-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{border-bottom:none;justify-content:center;padding-bottom:0}.auth-modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{border-top:none;justify-content:center}.error-message[_ngcontent-%COMP%]{background-color:#ff6b6b1a;border-left:3px solid #ff6b6b;padding:10px 15px;margin-bottom:20px;border-radius:4px}.error-message[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding-left:20px}.error-message[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:5px}.error-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px;color:#ff6b6b}.auth-container.dark-mode[_ngcontent-%COMP%]{background:linear-gradient(to bottom,#121212,#000);color:#ddd}']})};export{A as ResetPasswordComponent};
