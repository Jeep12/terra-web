import{b as V,c as u,d as S,e as R,h as E,k as F,l as I,t as q,v as A}from"./chunk-7H4FOIUQ.js";import{a as O}from"./chunk-ONBG2WQO.js";import"./chunk-BVLKKP7E.js";import{a as k}from"./chunk-IRGPOW63.js";import{c as y,e as M}from"./chunk-FETJZTIA.js";import{j as C,k as _,l as v,s as x}from"./chunk-K3SCHVK6.js";import{Fb as a,Hb as h,Qa as i,Ua as b,Va as m,_a as w,db as g,lb as l,nb as p,qb as t,rb as n,sb as o,yb as f,zb as P}from"./chunk-JKD7CX52.js";function T(d,r){if(d&1&&(t(0,"li"),o(1,"i",33),a(2),n()),d&2){let s=r.$implicit;i(2),h(" ",s,"")}}function z(d,r){if(d&1&&(t(0,"div",31)(1,"ul"),g(2,T,3,1,"li",32),n()()),d&2){let s=P();i(2),l("ngForOf",s.errors)}}function j(d,r){d&1&&(t(0,"div",34),o(1,"div",35),n())}var N=class d{constructor(r,s,e,c,B){this.fb=r;this.authService=s;this.route=e;this.router=c;this.renderer=B;this.resetForm=this.fb.group({password:["",[u.required,u.minLength(8)]],confirmPassword:["",[u.required]]}),this.resetForm.get("password")?.valueChanges.subscribe(()=>{this.onPasswordChange()}),this.resetForm.get("confirmPassword")?.valueChanges.subscribe(()=>{this.onPasswordChange()})}errors=[];resetForm;passwordVisible=!1;repeatPasswordVisible=!1;loading=!1;tokenUser=null;passwordValidations={length:!1,uppercase:!1,specialChar:!1,number:!1,match:!1};ngOnInit(){let r=document.querySelector(".auth-container"),s=localStorage.getItem("theme");r&&(s==="dark"?this.renderer.addClass(r,"dark-mode"):this.renderer.removeClass(r,"dark-mode")),this.route.queryParams.subscribe(e=>{this.tokenUser=e.token})}onPasswordChange(){let r=this.resetForm.get("password")?.value,s=this.resetForm.get("confirmPassword")?.value;this.passwordValidations.length=r?.length>=8,this.passwordValidations.uppercase=/[A-Z]/.test(r),this.passwordValidations.specialChar=/[!@#$%^&*(),.?":{}|<>]/.test(r),this.passwordValidations.number=/\d/.test(r),this.passwordValidations.match=r===s}onSubmit(){if(!this.tokenUser){this.errors=["Invalid token."];return}let{password:r,confirmPassword:s}=this.resetForm.value;if(r!==s){this.errors=["Passwords do not match."];return}this.resetForm.valid&&this.tokenUser?(this.loading=!0,this.errors=[],this.authService.resetPassword(this.tokenUser,r).subscribe(e=>{e.success===!1?this.errors=[e.message]:new bootstrap.Modal(document.getElementById("successModal")).show(),this.loading=!1},e=>{this.errors=[e.error?.message||"An error occurred. Please try again."],this.loading=!1})):this.errors=["Please fill all required fields correctly."]}togglePasswordVisibility(){this.passwordVisible=!this.passwordVisible}toggleRepeatPasswordVisibility(){this.repeatPasswordVisible=!this.repeatPasswordVisible}isPasswordValid(){return this.passwordValidations.length&&this.passwordValidations.uppercase&&this.passwordValidations.specialChar&&this.passwordValidations.number&&this.passwordValidations.match}goBack(){this.router.navigate(["/login"])}static \u0275fac=function(s){return new(s||d)(m(q),m(O),m(y),m(M),m(b))};static \u0275cmp=w({type:d,selectors:[["app-reset-password"]],decls:67,vars:34,consts:[[1,"auth-container"],[1,"auth-card"],[1,"auth-title"],[1,"fas","fa-key"],[1,"auth-subtitle"],[1,"fas","fa-lock"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","password"],[1,"password-input-container"],["type","password","formControlName","password","id","password","placeholder","Enter your new password","autocomplete","new-password",1,"form-control",3,"input","type"],["type","button",1,"password-toggle",3,"click"],[1,"fas",3,"ngClass"],["for","confirmPassword"],["type","password","formControlName","confirmPassword","id","confirmPassword","placeholder","Confirm your new password","autocomplete","new-password",1,"form-control",3,"type"],["class","error-message",4,"ngIf"],[1,"password-requirements"],[1,"requirement"],["type","submit",1,"btn-primary",3,"disabled"],["class","loading-container",4,"ngIf"],[1,"fas","fa-check-circle"],["type","button",1,"btn-secondary",3,"click"],[1,"fas","fa-arrow-left"],["id","successModal","tabindex","-1","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content","auth-modal"],[1,"modal-header"],[1,"success-icon"],[1,"modal-body","text-center"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn-secondary"],[1,"error-message"],[4,"ngFor","ngForOf"],[1,"fas","fa-exclamation-circle"],[1,"loading-container"],[1,"loading-bar"]],template:function(s,e){s&1&&(o(0,"app-preload"),t(1,"div",0)(2,"div",1)(3,"h2",2),o(4,"i",3),a(5," Reset Password"),n(),t(6,"p",4),o(7,"i",5),a(8," Enter your new password and confirm it. "),n(),t(9,"form",6),f("ngSubmit",function(){return e.onSubmit()}),t(10,"div",7)(11,"label",8),o(12,"i",5),a(13," New Password"),n(),t(14,"div",9)(15,"input",10),f("input",function(){return e.onPasswordChange()}),n(),t(16,"button",11),f("click",function(){return e.togglePasswordVisibility()}),o(17,"i",12),n()()(),t(18,"div",7)(19,"label",13),o(20,"i",5),a(21," Confirm Password"),n(),t(22,"div",9),o(23,"input",14),t(24,"button",11),f("click",function(){return e.toggleRepeatPasswordVisibility()}),o(25,"i",12),n()()(),g(26,z,3,1,"div",15),t(27,"div",16)(28,"h4"),a(29,"Password Requirements:"),n(),t(30,"div",17),o(31,"i",12),a(32," At least 8 characters "),n(),t(33,"div",17),o(34,"i",12),a(35," At least one uppercase letter "),n(),t(36,"div",17),o(37,"i",12),a(38," At least one special character "),n(),t(39,"div",17),o(40,"i",12),a(41," At least one number "),n(),t(42,"div",17),o(43,"i",12),a(44," Passwords match "),n()(),t(45,"button",18),g(46,j,2,0,"div",19),o(47,"i",20),a(48),n(),o(49,"hr"),t(50,"button",21),f("click",function(){return e.goBack()}),o(51,"i",22),a(52," Back to login "),n()()()(),t(53,"div",23)(54,"div",24)(55,"div",25)(56,"div",26)(57,"div",27),o(58,"i",20),n()(),t(59,"div",28)(60,"h3"),a(61,"Password Reset Successfully!"),n(),t(62,"p"),a(63,"You can now login with your new password."),n()(),t(64,"div",29)(65,"button",30),a(66,"Close"),n()()()()()),s&2&&(i(9),l("formGroup",e.resetForm),i(6),l("type",e.passwordVisible?"text":"password"),i(2),l("ngClass",e.passwordVisible?"fa-eye-slash":"fa-eye"),i(6),l("type",e.repeatPasswordVisible?"text":"password"),i(2),l("ngClass",e.repeatPasswordVisible?"fa-eye-slash":"fa-eye"),i(),l("ngIf",e.errors.length>0),i(4),p("valid",e.passwordValidations.length)("invalid",!e.passwordValidations.length),i(),l("ngClass",e.passwordValidations.length?"fa-check-circle":"fa-times-circle"),i(2),p("valid",e.passwordValidations.uppercase)("invalid",!e.passwordValidations.uppercase),i(),l("ngClass",e.passwordValidations.uppercase?"fa-check-circle":"fa-times-circle"),i(2),p("valid",e.passwordValidations.specialChar)("invalid",!e.passwordValidations.specialChar),i(),l("ngClass",e.passwordValidations.specialChar?"fa-check-circle":"fa-times-circle"),i(2),p("valid",e.passwordValidations.number)("invalid",!e.passwordValidations.number),i(),l("ngClass",e.passwordValidations.number?"fa-check-circle":"fa-times-circle"),i(2),p("valid",e.passwordValidations.match)("invalid",!e.passwordValidations.match),i(),l("ngClass",e.passwordValidations.match?"fa-check-circle":"fa-times-circle"),i(2),l("disabled",!e.resetForm.valid||e.loading),i(),l("ngIf",e.loading),i(2),h(" ",e.loading?"":"Reset Password"," "))},dependencies:[A,E,V,S,R,F,I,x,C,_,v,k],styles:['.auth-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;padding:20px;background:linear-gradient(to bottom,#0c0f20,#000);font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.auth-card[_ngcontent-%COMP%]{background-color:#ffffff0d;border-radius:12px;padding:30px;width:100%;max-width:400px;box-shadow:0 8px 32px #0000004d;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.1)}.auth-title[_ngcontent-%COMP%]{color:#fff;text-align:center;margin-bottom:10px;font-weight:600;font-size:24px}.auth-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:10px}.auth-subtitle[_ngcontent-%COMP%]{color:#ffffffb3;text-align:center;margin-bottom:30px;font-size:14px;line-height:1.5}.auth-subtitle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;color:#e0e0e0;font-size:14px}label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px;width:16px;text-align:center}.form-control[_ngcontent-%COMP%]{width:100%;height:40px;border-radius:8px;border:1px solid rgba(255,255,255,.2);background-color:#ffffff12;color:#fff;font-size:16px;transition:all .3s ease;padding:0 12px}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#dabe6480;box-shadow:0 0 0 2px #dabe6440}.form-control[_ngcontent-%COMP%]::placeholder{color:#fff6}.loading-container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;height:4px;overflow:hidden}.loading-bar[_ngcontent-%COMP%]{background-color:#0c0f204d;min-width:100%;min-height:4px;position:relative;overflow:hidden}.loading-bar[_ngcontent-%COMP%]:after{content:"";min-height:4px;position:absolute;background:linear-gradient(to right,#dabe64cc,#fffc);transform:translate(-100%);animation:_ngcontent-%COMP%_loadingAnim 2s infinite}.loading-bar[_ngcontent-%COMP%]:before{content:"";min-height:4px;position:absolute;background:linear-gradient(to right,#dabe64cc,#fffc);transform:translate(-100%);animation:_ngcontent-%COMP%_loadingAnim 2s infinite;animation-delay:1s}@keyframes _ngcontent-%COMP%_loadingAnim{0%{transform:translate(-150%);min-width:100px}to{transform:translate(300%);min-width:400px}}.error-message[_ngcontent-%COMP%]{color:#ff6b6b;font-size:12px;margin-top:5px}.success-message[_ngcontent-%COMP%]{text-align:center;color:#fff;animation:_ngcontent-%COMP%_fadeIn .5s ease-in-out}.success-icon[_ngcontent-%COMP%]{width:60px;height:60px;background:linear-gradient(to right,#746535,#dabe64);border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 20px;font-size:30px;color:#0c0f20}.success-message[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:10px;font-size:20px}.success-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ffffffb3;margin-bottom:10px}.small-text[_ngcontent-%COMP%]{font-size:12px;opacity:.7}.small-text[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 480px){.auth-card[_ngcontent-%COMP%]{padding:20px}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%], .form-control[_ngcontent-%COMP%]{padding:10px}}.password-requirements[_ngcontent-%COMP%]{margin:20px 0;padding:15px;background-color:#ffffff0d;border-radius:8px;border:1px solid rgba(255,255,255,.1)}.password-requirements[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#dabe64;margin-bottom:10px;font-size:14px;text-transform:uppercase}.requirement[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:8px;font-size:13px;color:#ffffffb3}.requirement[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px;width:16px}.requirement.valid[_ngcontent-%COMP%]{color:#4caf50}.requirement.invalid[_ngcontent-%COMP%]{color:#ffffff80}.requirement.valid[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#4caf50}.requirement.invalid[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#f44336}.auth-modal[_ngcontent-%COMP%]{background-color:#ffffff0d;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.1);color:#fff}.auth-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{border-bottom:none;justify-content:center;padding-bottom:0}.auth-modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{border-top:none;justify-content:center}.error-message[_ngcontent-%COMP%]{background-color:#ff6b6b1a;border-left:3px solid #ff6b6b;padding:10px 15px;margin-bottom:20px;border-radius:4px}.error-message[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding-left:20px}.error-message[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:5px}.error-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px;color:#ff6b6b}.auth-container.dark-mode[_ngcontent-%COMP%]{background:linear-gradient(to bottom,#121212,#000);color:#ddd}']})};export{N as ResetPasswordComponent};
