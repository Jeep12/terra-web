import{c as en,h as tn,m as nn,t as rn,y as re}from"./chunk-E5VILR6C.js";import{Eb as Ye,Pa as I,Q as Qt,W as qe,Za as Zt,a as Jt,b as Xt,c as W,cb as Ge,d as o,kb as Ke,lb as v,m as ve,pb as K,qb as B,rb as Y}from"./chunk-7JUKLSWG.js";var sn=()=>{};var cn=function(n){let e=[],t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},Di=function(n){let e=[],t=0,i=0;for(;t<n.length;){let r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){let s=n[t++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){let s=n[t++],a=n[t++],c=n[t++],l=((r&7)<<18|(s&63)<<12|(a&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{let s=n[t++],a=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63)}}return e.join("")},ln={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){let s=n[r],a=r+1<n.length,c=a?n[r+1]:0,l=r+2<n.length,u=l?n[r+2]:0,f=s>>2,p=(s&3)<<4|c>>4,d=(c&15)<<2|u>>6,g=u&63;l||(g=64,a||(d=64)),i.push(t[f],t[p],t[d],t[g])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(cn(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Di(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){let s=t[n.charAt(r++)],c=r<n.length?t[n.charAt(r)]:0;++r;let u=r<n.length?t[n.charAt(r)]:64;++r;let p=r<n.length?t[n.charAt(r)]:64;if(++r,s==null||c==null||u==null||p==null)throw new Xe;let d=s<<2|c>>4;if(i.push(d),u!==64){let g=c<<4&240|u>>2;if(i.push(g),p!==64){let y=u<<6&192|p;i.push(y)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Xe=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Li=function(n){let e=cn(n);return ln.encodeByteArray(e,!0)},Ze=function(n){return Li(n).replace(/\./g,"")},Ee=function(n){try{return ln.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Mi(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Ui=()=>Mi().__FIREBASE_DEFAULTS__,xi=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Fi=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Ee(n[1]);return e&&JSON.parse(e)},et=()=>{try{return sn()||Ui()||xi()||Fi()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},un=n=>{var e,t;return(t=(e=et())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]};var tt=()=>{var n;return(n=et())===null||n===void 0?void 0:n.config},nt=n=>{var e;return(e=et())===null||e===void 0?void 0:e[`_${n}`]};var ye=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}};function ae(n){return n.endsWith(".cloudworkstations.dev")}function dn(n){return o(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}var se={};function Vi(){let n={prod:[],emulator:[]};for(let e of Object.keys(se))se[e]?n.emulator.push(e):n.prod.push(e);return n}function Hi(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var an=!1;function hn(n,e){if(typeof window>"u"||typeof document>"u"||!ae(window.location.host)||se[n]===e||se[n]||an)return;se[n]=e;function t(d){return`__firebase__banner__${d}`}let i="__firebase__banner",s=Vi().prod.length>0;function a(){let d=document.getElementById(i);d&&d.remove()}function c(d){d.style.display="flex",d.style.background="#7faaf0",d.style.position="fixed",d.style.bottom="5px",d.style.left="5px",d.style.padding=".5em",d.style.borderRadius="5px",d.style.alignItems="center"}function l(d,g){d.setAttribute("width","24"),d.setAttribute("id",g),d.setAttribute("height","24"),d.setAttribute("viewBox","0 0 24 24"),d.setAttribute("fill","none"),d.style.marginLeft="-6px"}function u(){let d=document.createElement("span");return d.style.cursor="pointer",d.style.marginLeft="16px",d.style.fontSize="24px",d.innerHTML=" &times;",d.onclick=()=>{an=!0,a()},d}function f(d,g){d.setAttribute("id",g),d.innerText="Learn more",d.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",d.setAttribute("target","__blank"),d.style.paddingLeft="5px",d.style.textDecoration="underline"}function p(){let d=Hi(i),g=t("text"),y=document.getElementById(g)||document.createElement("span"),ne=t("learnmore"),G=document.getElementById(ne)||document.createElement("a"),ie=t("preprendIcon"),V=document.getElementById(ie)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(d.created){let H=d.element;c(H),f(G,ne);let Ie=u();l(V,ie),H.append(V,y,G,Ie),document.body.appendChild(H)}s?(y.innerText="Preview backend disconnected.",V.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(V.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,y.innerText="Preview backend running in this workspace."),y.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function _(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function fn(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_())}function pn(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function mn(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function gn(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _n(){let n=_();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function In(){try{return typeof indexedDB=="object"}catch{return!1}}function vn(){return new Promise((n,e)=>{try{let t=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var Wi="FirebaseError",E=class n extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=Wi,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,C.prototype.create)}},C=class{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){let i=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],a=s?Bi(s,i):"Error",c=`${this.serviceName}: ${a} (${r}).`;return new E(r,c,i)}};function Bi(n,e){return n.replace(ji,(t,i)=>{let r=e[i];return r!=null?String(r):`<${i}?>`})}var ji=/\{\$([^}]+)}/g;function yn(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function D(n,e){if(n===e)return!0;let t=Object.keys(n),i=Object.keys(e);for(let r of t){if(!i.includes(r))return!1;let s=n[r],a=e[r];if(on(s)&&on(a)){if(!D(s,a))return!1}else if(s!==a)return!1}for(let r of i)if(!t.includes(r))return!1;return!0}function on(n){return n!==null&&typeof n=="object"}function J(n){let e=[];for(let[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function En(n,e){let t=new Qe(n,e);return t.subscribe.bind(t)}var Qe=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");$i(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=Je),r.error===void 0&&(r.error=Je),r.complete===void 0&&(r.complete=Je);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function $i(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Je(){}var Ma=4*60*60*1e3;function L(n){return n&&n._delegate?n._delegate:n}var b=class{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var j="[DEFAULT]";var it=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let i=new ye;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let i=this.normalizeInstanceIdentifier(e?.identifier),r=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(qi(e))try{this.getOrInitializeService({instanceIdentifier:j})}catch{}for(let[t,i]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=j){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return o(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=j){return this.instances.has(e)}getOptions(e=j){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(let[s,a]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);i===c&&a.resolve(r)}return r}onInit(e,t){var i;let r=this.normalizeInstanceIdentifier(t),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);let a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let i=this.onInitCallbacks.get(t);if(i)for(let r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:zi(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=j){return this.component?this.component.multipleInstances?e:j:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function zi(n){return n===j?void 0:n}function qi(n){return n.instantiationMode==="EAGER"}var we=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new it(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var Gi=[],m=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(m||{}),Ki={debug:m.DEBUG,verbose:m.VERBOSE,info:m.INFO,warn:m.WARN,error:m.ERROR,silent:m.SILENT},Yi=m.INFO,Ji={[m.DEBUG]:"log",[m.VERBOSE]:"log",[m.INFO]:"info",[m.WARN]:"warn",[m.ERROR]:"error"},Xi=(n,e,...t)=>{if(e<n.logLevel)return;let i=new Date().toISOString(),r=Ji[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},X=class{constructor(e){this.name=e,this._logLevel=Yi,this._logHandler=Xi,this._userLogHandler=null,Gi.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in m))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Ki[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,m.DEBUG,...e),this._logHandler(this,m.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,m.VERBOSE,...e),this._logHandler(this,m.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,m.INFO,...e),this._logHandler(this,m.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,m.WARN,...e),this._logHandler(this,m.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,m.ERROR,...e),this._logHandler(this,m.ERROR,...e)}};var Qi=(n,e)=>e.some(t=>n instanceof t),wn,Tn;function Zi(){return wn||(wn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function er(){return Tn||(Tn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var bn=new WeakMap,st=new WeakMap,An=new WeakMap,rt=new WeakMap,ot=new WeakMap;function tr(n){let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(A(n.result)),r()},a=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&bn.set(t,n)}).catch(()=>{}),ot.set(e,n),e}function nr(n){if(st.has(n))return;let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),r()},a=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});st.set(n,e)}var at={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return st.get(n);if(e==="objectStoreNames")return n.objectStoreNames||An.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return A(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Sn(n){at=n(at)}function ir(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let i=n.call(Te(this),e,...t);return An.set(i,e.sort?e.sort():[e]),A(i)}:er().includes(n)?function(...e){return n.apply(Te(this),e),A(bn.get(this))}:function(...e){return A(n.apply(Te(this),e))}}function rr(n){return typeof n=="function"?ir(n):(n instanceof IDBTransaction&&nr(n),Qi(n,Zi())?new Proxy(n,at):n)}function A(n){if(n instanceof IDBRequest)return tr(n);if(rt.has(n))return rt.get(n);let e=rr(n);return e!==n&&(rt.set(n,e),ot.set(e,n)),e}var Te=n=>ot.get(n);function Cn(n,e,{blocked:t,upgrade:i,blocking:r,terminated:s}={}){let a=indexedDB.open(n,e),c=A(a);return i&&a.addEventListener("upgradeneeded",l=>{i(A(a.result),l.oldVersion,l.newVersion,A(a.transaction),l)}),t&&a.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),c.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),c}var sr=["get","getKey","getAll","getAllKeys","count"],ar=["put","add","delete","clear"],ct=new Map;function Pn(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(ct.get(e))return ct.get(e);let t=e.replace(/FromIndex$/,""),i=e!==t,r=ar.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||sr.includes(t)))return;let s=function(a,...c){return o(this,null,function*(){let l=this.transaction(a,r?"readwrite":"readonly"),u=l.store;return i&&(u=u.index(c.shift())),(yield Promise.all([u[t](...c),r&&l.done]))[0]})};return ct.set(e,s),s}Sn(n=>Xt(Jt({},n),{get:(e,t,i)=>Pn(e,t)||n.get(e,t,i),has:(e,t)=>!!Pn(e,t)||n.has(e,t)}));var ut=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(or(t)){let i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}};function or(n){let e=n.getComponent();return e?.type==="VERSION"}var dt="@firebase/app",On="0.13.1";var O=new X("@firebase/app"),cr="@firebase/app-compat",lr="@firebase/analytics-compat",ur="@firebase/analytics",dr="@firebase/app-check-compat",hr="@firebase/app-check",fr="@firebase/auth",pr="@firebase/auth-compat",mr="@firebase/database",gr="@firebase/data-connect",_r="@firebase/database-compat",Ir="@firebase/functions",vr="@firebase/functions-compat",yr="@firebase/installations",Er="@firebase/installations-compat",wr="@firebase/messaging",Tr="@firebase/messaging-compat",br="@firebase/performance",Ar="@firebase/performance-compat",Sr="@firebase/remote-config",Pr="@firebase/remote-config-compat",Cr="@firebase/storage",Or="@firebase/storage-compat",Rr="@firebase/firestore",kr="@firebase/ai",Nr="@firebase/firestore-compat",Dr="firebase",Lr="11.9.0";var ht="[DEFAULT]",Mr={[dt]:"fire-core",[cr]:"fire-core-compat",[ur]:"fire-analytics",[lr]:"fire-analytics-compat",[hr]:"fire-app-check",[dr]:"fire-app-check-compat",[fr]:"fire-auth",[pr]:"fire-auth-compat",[mr]:"fire-rtdb",[gr]:"fire-data-connect",[_r]:"fire-rtdb-compat",[Ir]:"fire-fn",[vr]:"fire-fn-compat",[yr]:"fire-iid",[Er]:"fire-iid-compat",[wr]:"fire-fcm",[Tr]:"fire-fcm-compat",[br]:"fire-perf",[Ar]:"fire-perf-compat",[Sr]:"fire-rc",[Pr]:"fire-rc-compat",[Cr]:"fire-gcs",[Or]:"fire-gcs-compat",[Rr]:"fire-fst",[Nr]:"fire-fst-compat",[kr]:"fire-vertex","fire-js":"fire-js",[Dr]:"fire-js-all"};var be=new Map,Ur=new Map,ft=new Map;function Rn(n,e){try{n.container.addComponent(e)}catch(t){O.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Q(n){let e=n.name;if(ft.has(e))return O.debug(`There were multiple attempts to register component ${e}.`),!1;ft.set(e,n);for(let t of be.values())Rn(t,n);for(let t of Ur.values())Rn(t,n);return!0}function _t(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function w(n){return n==null?!1:n.settings!==void 0}var xr={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},M=new C("app","Firebase",xr);var pt=class{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new b("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw M.create("app-deleted",{appName:this._name})}};var Z=Lr;function It(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let i=Object.assign({name:ht,automaticDataCollectionEnabled:!0},e),r=i.name;if(typeof r!="string"||!r)throw M.create("bad-app-name",{appName:String(r)});if(t||(t=tt()),!t)throw M.create("no-options");let s=be.get(r);if(s){if(D(t,s.options)&&D(i,s.config))return s;throw M.create("duplicate-app",{appName:r})}let a=new we(r);for(let l of ft.values())a.addComponent(l);let c=new pt(t,i,a);return be.set(r,c),c}function Ln(n=ht){let e=be.get(n);if(!e&&n===ht&&tt())return It();if(!e)throw M.create("no-app",{appName:n});return e}function U(n,e,t){var i;let r=(i=Mr[n])!==null&&i!==void 0?i:n;t&&(r+=`-${t}`);let s=r.match(/\s|\//),a=e.match(/\s|\//);if(s||a){let c=[`Unable to register library "${r}" with version "${e}":`];s&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),O.warn(c.join(" "));return}Q(new b(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var Fr="firebase-heartbeat-database",Vr=1,oe="firebase-heartbeat-store",lt=null;function Mn(){return lt||(lt=Cn(Fr,Vr,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(oe)}catch(t){console.warn(t)}}}}).catch(n=>{throw M.create("idb-open",{originalErrorMessage:n.message})})),lt}function Hr(n){return o(this,null,function*(){try{let t=(yield Mn()).transaction(oe),i=yield t.objectStore(oe).get(Un(n));return yield t.done,i}catch(e){if(e instanceof E)O.warn(e.message);else{let t=M.create("idb-get",{originalErrorMessage:e?.message});O.warn(t.message)}}})}function kn(n,e){return o(this,null,function*(){try{let i=(yield Mn()).transaction(oe,"readwrite");yield i.objectStore(oe).put(e,Un(n)),yield i.done}catch(t){if(t instanceof E)O.warn(t.message);else{let i=M.create("idb-set",{originalErrorMessage:t?.message});O.warn(i.message)}}})}function Un(n){return`${n.name}!${n.options.appId}`}var Wr=1024,Br=30,mt=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new gt(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return o(this,null,function*(){var e,t;try{let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Nn();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>Br){let a=$r(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){O.warn(i)}})}getHeartbeatsHeader(){return o(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=Nn(),{heartbeatsToSend:i,unsentEntries:r}=jr(this._heartbeatsCache.heartbeats),s=Ze(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return O.warn(t),""}})}};function Nn(){return new Date().toISOString().substring(0,10)}function jr(n,e=Wr){let t=[],i=n.slice();for(let r of n){let s=t.find(a=>a.agent===r.agent);if(s){if(s.dates.push(r.date),Dn(t)>e){s.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),Dn(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}var gt=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return o(this,null,function*(){return In()?vn().then(()=>!0).catch(()=>!1):!1})}read(){return o(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield Hr(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return o(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return kn(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return o(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return kn(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function Dn(n){return Ze(JSON.stringify({version:2,heartbeats:n})).length}function $r(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}function zr(n){Q(new b("platform-logger",e=>new ut(e),"PRIVATE")),Q(new b("heartbeat",e=>new mt(e),"PRIVATE")),U(dt,On,n),U(dt,On,"esm2017"),U("fire-js","")}zr("");var qr="firebase",Gr="11.9.1";U(qr,Gr,"app");function Xn(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Qn=Xn,Zn=new C("auth","Firebase",Xn());var Re=new X("@firebase/auth");function Kr(n,...e){Re.logLevel<=m.WARN&&Re.warn(`Auth (${Z}): ${n}`,...e)}function Se(n,...e){Re.logLevel<=m.ERROR&&Re.error(`Auth (${Z}): ${n}`,...e)}function P(n,...e){throw Ut(n,...e)}function T(n,...e){return Ut(n,...e)}function Mt(n,e,t){let i=Object.assign(Object.assign({},Qn()),{[e]:t});return new C("auth","Firebase",i).create(e,{appName:n.name})}function $(n){return Mt(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Yr(n,e,t){let i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&P(n,"argument-error"),Mt(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ut(n,...e){if(typeof n!="string"){let t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return Zn.create(n,...e)}function h(n,e,...t){if(!n)throw Ut(e,...t)}function R(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Se(e),new Error(e)}function N(n,e){n||R(e)}function Et(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Jr(){return xn()==="http:"||xn()==="https:"}function xn(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function Xr(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Jr()||mn()||"connection"in navigator)?navigator.onLine:!0}function Qr(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var z=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,N(t>e,"Short delay should be less than long delay!"),this.isMobile=fn()||gn()}get(){return Xr()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function xt(n,e){N(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var ke=class{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;R("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;R("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;R("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Zr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var es=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ts=new z(3e4,6e4);function Ft(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function te(s,a,c,l){return o(this,arguments,function*(n,e,t,i,r={}){return ei(n,r,()=>o(null,null,function*(){let u={},f={};i&&(e==="GET"?f=i:u={body:JSON.stringify(i)});let p=J(Object.assign({key:n.config.apiKey},f)).slice(1),d=yield n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);let g=Object.assign({method:e,headers:d},u);return pn()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&ae(n.emulatorConfig.host)&&(g.credentials="include"),ke.fetch()(yield ti(n,n.config.apiHost,t,p),g)}))})}function ei(n,e,t){return o(this,null,function*(){n._canInitEmulator=!1;let i=Object.assign(Object.assign({},Zr),e);try{let r=new wt(n),s=yield Promise.race([t(),r.promise]);r.clearNetworkTimeout();let a=yield s.json();if("needConfirmation"in a)throw Ae(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{let c=s.ok?a.errorMessage:a.error.message,[l,u]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ae(n,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw Ae(n,"email-already-in-use",a);if(l==="USER_DISABLED")throw Ae(n,"user-disabled",a);let f=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Mt(n,f,u);P(n,f)}}catch(r){if(r instanceof E)throw r;P(n,"network-request-failed",{message:String(r)})}})}function ns(s,a,c,l){return o(this,arguments,function*(n,e,t,i,r={}){let u=yield te(n,e,t,i,r);return"mfaPendingCredential"in u&&P(n,"multi-factor-auth-required",{_serverResponse:u}),u})}function ti(n,e,t,i){return o(this,null,function*(){let r=`${e}${t}?${i}`,s=n,a=s.config.emulator?xt(n.config,r):`${n.config.apiScheme}://${r}`;return es.includes(t)&&(yield s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a})}var wt=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(T(this.auth,"network-request-failed")),ts.get())})}};function Ae(n,e,t){let i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);let r=T(n,e,i);return r.customData._tokenResponse=t,r}function is(n,e){return o(this,null,function*(){return te(n,"POST","/v1/accounts:delete",e)})}function Ne(n,e){return o(this,null,function*(){return te(n,"POST","/v1/accounts:lookup",e)})}function ce(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function ni(n,e=!1){return o(this,null,function*(){let t=L(n),i=yield t.getIdToken(e),r=Vt(i);h(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");let s=typeof r.firebase=="object"?r.firebase:void 0,a=s?.sign_in_provider;return{claims:r,token:i,authTime:ce(vt(r.auth_time)),issuedAtTime:ce(vt(r.iat)),expirationTime:ce(vt(r.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function vt(n){return Number(n)*1e3}function Vt(n){let[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Se("JWT malformed, contained fewer than 3 sections"),null;try{let r=Ee(t);return r?JSON.parse(r):(Se("Failed to decode base64 JWT payload"),null)}catch(r){return Se("Caught error parsing JWT payload as JSON",r?.toString()),null}}function Fn(n){let e=Vt(n);return h(e,"internal-error"),h(typeof e.exp<"u","internal-error"),h(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function ue(n,e,t=!1){return o(this,null,function*(){if(t)return e;try{return yield e}catch(i){throw i instanceof E&&rs(i)&&n.auth.currentUser===n&&(yield n.auth.signOut()),i}})}function rs({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Tt=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>o(this,null,function*(){yield this.iteration()}),t)}iteration(){return o(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var de=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ce(this.lastLoginAt),this.creationTime=ce(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function De(n){return o(this,null,function*(){var e;let t=n.auth,i=yield n.getIdToken(),r=yield ue(n,Ne(t,{idToken:i}));h(r?.users.length,t,"internal-error");let s=r.users[0];n._notifyReloadListener(s);let a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?ri(s.providerUserInfo):[],c=ss(n.providerData,a),l=n.isAnonymous,u=!(n.email&&s.passwordHash)&&!c?.length,f=l?u:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new de(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(n,p)})}function ii(n){return o(this,null,function*(){let e=L(n);yield De(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function ss(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function ri(n){return n.map(e=>{var{providerId:t}=e,i=ve(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function as(n,e){return o(this,null,function*(){let t=yield ei(n,{},()=>o(null,null,function*(){let i=J({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=n.config,a=yield ti(n,r,"/v1/token",`key=${s}`),c=yield n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";let l={method:"POST",headers:c,body:i};return n.emulatorConfig&&ae(n.emulatorConfig.host)&&(l.credentials="include"),ke.fetch()(a,l)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function os(n,e){return o(this,null,function*(){return te(n,"POST","/v2/accounts:revokeToken",Ft(n,e))})}var le=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){h(e.idToken,"internal-error"),h(typeof e.idToken<"u","internal-error"),h(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Fn(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){h(e.length!==0,"internal-error");let t=Fn(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return o(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(h(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return o(this,null,function*(){let{accessToken:i,refreshToken:r,expiresIn:s}=yield as(e,t);this.updateTokensAndExpiration(i,r,Number(s))})}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){let{refreshToken:i,accessToken:r,expirationTime:s}=t,a=new n;return i&&(h(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(h(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),s&&(h(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return R("not implemented")}};function x(n,e){h(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var F=class n{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,s=ve(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Tt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new de(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return o(this,null,function*(){let t=yield ue(this,this.stsTokenManager.getToken(this.auth,e));return h(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return ni(this,e)}reload(){return ii(this)}_assign(e){this!==e&&(h(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){h(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return o(this,null,function*(){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield De(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return o(this,null,function*(){if(w(this.auth.app))return Promise.reject($(this.auth));let e=yield this.getIdToken();return yield ue(this,is(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,s,a,c,l,u,f;let p=(i=t.displayName)!==null&&i!==void 0?i:void 0,d=(r=t.email)!==null&&r!==void 0?r:void 0,g=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,y=(a=t.photoURL)!==null&&a!==void 0?a:void 0,ne=(c=t.tenantId)!==null&&c!==void 0?c:void 0,G=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,ie=(u=t.createdAt)!==null&&u!==void 0?u:void 0,V=(f=t.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:H,emailVerified:Ie,isAnonymous:Kt,providerData:$e,stsTokenManager:Yt}=t;h(H&&Yt,e,"internal-error");let ki=le.fromJSON(this.name,Yt);h(typeof H=="string",e,"internal-error"),x(p,e.name),x(d,e.name),h(typeof Ie=="boolean",e,"internal-error"),h(typeof Kt=="boolean",e,"internal-error"),x(g,e.name),x(y,e.name),x(ne,e.name),x(G,e.name),x(ie,e.name),x(V,e.name);let ze=new n({uid:H,auth:e,email:d,emailVerified:Ie,displayName:p,isAnonymous:Kt,photoURL:y,phoneNumber:g,tenantId:ne,stsTokenManager:ki,createdAt:ie,lastLoginAt:V});return $e&&Array.isArray($e)&&(ze.providerData=$e.map(Ni=>Object.assign({},Ni))),G&&(ze._redirectEventId=G),ze}static _fromIdTokenResponse(e,t,i=!1){return o(this,null,function*(){let r=new le;r.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return yield De(s),s})}static _fromGetAccountInfoResponse(e,t,i){return o(this,null,function*(){let r=t.users[0];h(r.localId!==void 0,"internal-error");let s=r.providerUserInfo!==void 0?ri(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!s?.length,c=new le;c.updateFromIdToken(i);let l=new n({uid:r.localId,auth:e,stsTokenManager:c,isAnonymous:a}),u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new de(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(l,u),l})}};var Vn=new Map;function k(n){N(n instanceof Function,"Expected a class definition");let e=Vn.get(n);return e?(N(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Vn.set(n,e),e)}var cs=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return o(this,null,function*(){return!0})}_set(t,i){return o(this,null,function*(){this.storage[t]=i})}_get(t){return o(this,null,function*(){let i=this.storage[t];return i===void 0?null:i})}_remove(t){return o(this,null,function*(){delete this.storage[t]})}_addListener(t,i){}_removeListener(t,i){}}return n.type="NONE",n})(),bt=cs;function Pe(n,e,t){return`firebase:${n}:${e}:${t}`}var Le=class n{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;let{config:r,name:s}=this.auth;this.fullUserKey=Pe(this.userKey,r.apiKey,s),this.fullPersistenceKey=Pe("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return o(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield Ne(this.auth,{idToken:e}).catch(()=>{});return t?F._fromGetAccountInfoResponse(this.auth,t,e):null}return F._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return o(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,i="authUser"){return o(this,null,function*(){if(!t.length)return new n(k(bt),e,i);let r=(yield Promise.all(t.map(u=>o(null,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),s=r[0]||k(bt),a=Pe(i,e.config.apiKey,e.name),c=null;for(let u of t)try{let f=yield u._get(a);if(f){let p;if(typeof f=="string"){let d=yield Ne(e,{idToken:f}).catch(()=>{});if(!d)break;p=yield F._fromGetAccountInfoResponse(e,d,f)}else p=F._fromJSON(e,f);u!==s&&(c=p),s=u;break}}catch{}let l=r.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new n(s,e,i):(s=l[0],c&&(yield s._set(a,c.toJSON())),yield Promise.all(t.map(u=>o(null,null,function*(){if(u!==s)try{yield u._remove(a)}catch{}}))),new n(s,e,i))})}};function Hn(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ci(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(si(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ui(e))return"Blackberry";if(di(e))return"Webos";if(ai(e))return"Safari";if((e.includes("chrome/")||oi(e))&&!e.includes("edge/"))return"Chrome";if(li(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function si(n=_()){return/firefox\//i.test(n)}function ai(n=_()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function oi(n=_()){return/crios\//i.test(n)}function ci(n=_()){return/iemobile/i.test(n)}function li(n=_()){return/android/i.test(n)}function ui(n=_()){return/blackberry/i.test(n)}function di(n=_()){return/webos/i.test(n)}function Ht(n=_()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function ls(n=_()){var e;return Ht(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function us(){return _n()&&document.documentMode===10}function hi(n=_()){return Ht(n)||li(n)||di(n)||ui(n)||/windows phone/i.test(n)||ci(n)}function fi(n,e=[]){let t;switch(n){case"Browser":t=Hn(_());break;case"Worker":t=`${Hn(_())}-${n}`;break;default:t=n}let i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Z}/${i}`}var At=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let i=s=>new Promise((a,c)=>{try{let l=e(s);a(l)}catch(l){c(l)}});i.onAbort=t,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){return o(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let i of this.queue)yield i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(let r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})}};function ds(t){return o(this,arguments,function*(n,e={}){return te(n,"GET","/v2/passwordPolicy",Ft(n,e))})}var hs=6,St=class{constructor(e){var t,i,r,s;let a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:hs,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,r,s,a,c;let l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(a=l.containsNumericCharacter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(c=l.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),l}validatePasswordLengthOptions(e,t){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Pt=class{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Me(this),this.idTokenSubscription=new Me(this),this.beforeStateQueue=new At(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Zn,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=k(t)),this._initializationPromise=this.queue(()=>o(this,null,function*(){var i,r,s;if(!this._deleted&&(this.persistenceManager=yield Le.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return o(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return o(this,null,function*(){try{let t=yield Ne(this,{idToken:e}),i=yield F._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return o(this,null,function*(){var t;if(w(this.app)){let a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}let i=yield this.assertedPersistence.getCurrentUser(),r=i,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=r?._redirectEventId,l=yield this.tryRedirectSignIn(e);(!a||a===c)&&l?.user&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(r)}catch(a){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return h(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return o(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return o(this,null,function*(){try{yield De(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=Qr()}_delete(){return o(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return o(this,null,function*(){if(w(this.app))return Promise.reject($(this));let t=e?L(e):null;return t&&h(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return o(this,null,function*(){if(!this._deleted)return e&&h(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>o(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return o(this,null,function*(){return w(this.app)?Promise.reject($(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return w(this.app)?Promise.reject($(this)):this.queue(()=>o(this,null,function*(){yield this.assertedPersistence.setPersistence(k(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return o(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return o(this,null,function*(){let e=yield ds(this),t=new St(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new C("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},t)}})}revokeAccessToken(e){return o(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),yield os(this,i)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return o(this,null,function*(){let i=yield this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return o(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&k(e)||this._popupRedirectResolver;h(t,this,"argument-error"),this.redirectPersistenceManager=yield Le.create(this,[k(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return o(this,null,function*(){var t,i;return this._isInitialized&&(yield this.queue(()=>o(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return o(this,null,function*(){if(e===this.currentUser)return this.queue(()=>o(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),a=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(h(c,this,"internal-error"),c.then(()=>{a||s(this.currentUser)}),typeof t=="function"){let l=e.addObserver(t,i,r);return()=>{a=!0,l()}}else{let l=e.addObserver(t);return()=>{a=!0,l()}}}directlySetCurrentUser(e){return o(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return h(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return o(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let i=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();i&&(t["X-Firebase-Client"]=i);let r=yield this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t})}_getAppCheckToken(){return o(this,null,function*(){var e;if(w(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&Kr(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function We(n){return L(n)}var Me=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=En(t=>this.observer=t)}get next(){return h(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Wt={loadJS(){return o(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function fs(n){Wt=n}function ps(n){return Wt.loadJS(n)}function ms(){return Wt.gapiScript}function pi(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function mi(n,e){let t=_t(n,"auth");if(t.isInitialized()){let r=t.getImmediate(),s=t.getOptions();if(D(s,e??{}))return r;P(r,"already-initialized")}return t.initialize({options:e})}function gs(n,e){let t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(k);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function gi(n,e,t){let i=We(n);h(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");let r=!!t?.disableWarnings,s=_i(e),{host:a,port:c}=_s(e),l=c===null?"":`:${c}`,u={url:`${s}//${a}${l}/`},f=Object.freeze({host:a,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){h(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),h(D(u,i.config.emulator)&&D(f,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=u,i.emulatorConfig=f,i.settings.appVerificationDisabledForTesting=!0,ae(a)?(dn(`${s}//${a}${l}`),hn("Auth",!0)):r||Is()}function _i(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function _s(n){let e=_i(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){let s=r[1];return{host:s,port:Wn(i.substr(s.length+1))}}else{let[s,a]=i.split(":");return{host:s,port:Wn(a)}}}function Wn(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function Is(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var he=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return R("not implemented")}_getIdTokenResponse(e){return R("not implemented")}_linkToIdToken(e,t){return R("not implemented")}_getReauthenticationResolver(e){return R("not implemented")}};function ee(n,e){return o(this,null,function*(){return ns(n,"POST","/v1/accounts:signInWithIdp",Ft(n,e))})}var vs="http://localhost",fe=class n extends he{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):P("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=t,s=ve(t,["providerId","signInMethod"]);if(!i||!r)return null;let a=new n(i,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){let t=this.buildRequest();return ee(e,t)}_linkToIdToken(e,t){let i=this.buildRequest();return i.idToken=t,ee(e,i)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,ee(e,t)}buildRequest(){let e={requestUri:vs,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=J(t)}return e}};var pe=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var me=class extends pe{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Bt=(()=>{class n extends me{constructor(){super("facebook.com")}static credential(t){return fe._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch{return null}}}n.FACEBOOK_SIGN_IN_METHOD="facebook.com",n.PROVIDER_ID="facebook.com";return n})(),jt=(()=>{class n extends me{constructor(){super("google.com"),this.addScope("profile")}static credential(t,i){return fe._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:i})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:i,oauthAccessToken:r}=t;if(!i&&!r)return null;try{return n.credential(i,r)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();var ge=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,i,r=!1){return o(this,null,function*(){let s=yield F._fromIdTokenResponse(e,i,r),a=Bn(i);return new n({user:s,providerId:a,_tokenResponse:i,operationType:t})})}static _forOperation(e,t,i){return o(this,null,function*(){yield e._updateTokensIfNecessary(i,!0);let r=Bn(i);return new n({user:e,providerId:r,_tokenResponse:i,operationType:t})})}};function Bn(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Ct=class n extends E{constructor(e,t,i,r){var s;super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new n(e,t,i,r)}};function Ii(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Ct._fromErrorAndOperation(n,s,e,i):s})}function ys(n,e,t=!1){return o(this,null,function*(){let i=yield ue(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return ge._forOperation(n,"link",i)})}function Es(n,e,t=!1){return o(this,null,function*(){let{auth:i}=n;if(w(i.app))return Promise.reject($(i));let r="reauthenticate";try{let s=yield ue(n,Ii(i,r,e,n),t);h(s.idToken,i,"internal-error");let a=Vt(s.idToken);h(a,i,"internal-error");let{sub:c}=a;return h(n.uid===c,i,"user-mismatch"),ge._forOperation(n,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&P(i,"user-mismatch"),s}})}function ws(n,e,t=!1){return o(this,null,function*(){if(w(n.app))return Promise.reject($(n));let i="signIn",r=yield Ii(n,i,e),s=yield ge._fromIdTokenResponse(n,i,r);return t||(yield n._updateCurrentUser(s.user)),s})}function vi(n,e,t,i){return L(n).onIdTokenChanged(e,t,i)}function yi(n,e,t){return L(n).beforeAuthStateChanged(e,t)}function $t(n){return L(n).signOut()}var Ue="__sak";var xe=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ue,"1"),this.storage.removeItem(Ue),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var Ts=1e3,bs=10,As=(()=>{class n extends xe{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=hi(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let i of Object.keys(this.listeners)){let r=this.storage.getItem(i),s=this.localCache[i];r!==s&&t(i,s,r)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((c,l,u)=>{this.notifyListeners(c,u)});return}let r=t.key;i?this.detachListener():this.stopPolling();let s=()=>{let c=this.storage.getItem(r);!i&&this.localCache[r]===c||this.notifyListeners(r,c)},a=this.storage.getItem(r);us()&&a!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,bs):s()}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r}),!0)})},Ts)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,i){return o(this,null,function*(){yield W(n.prototype,this,"_set").call(this,t,i),this.localCache[t]=JSON.stringify(i)})}_get(t){return o(this,null,function*(){let i=yield W(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(i),i})}_remove(t){return o(this,null,function*(){yield W(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),Ei=As;var Ss=(()=>{class n extends xe{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}return n.type="SESSION",n})(),zt=Ss;function Ps(n){return Promise.all(n.map(e=>o(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var Cs=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let i=this.receivers.find(s=>s.isListeningto(t));if(i)return i;let r=new n(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}handleEvent(t){return o(this,null,function*(){let i=t,{eventId:r,eventType:s,data:a}=i.data,c=this.handlersMap[s];if(!c?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:s});let l=Array.from(c).map(f=>o(this,null,function*(){return f(i.origin,a)})),u=yield Ps(l);i.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function qt(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}var Ot=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,i=50){return o(this,null,function*(){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,a;return new Promise((c,l)=>{let u=qt("",20);r.port1.start();let f=setTimeout(()=>{l(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(p){let d=p;if(d.data.eventId===u)switch(d.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(d.data.response);break;default:clearTimeout(f),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})})}};function S(){return window}function Os(n){S().location.href=n}function wi(){return typeof S().WorkerGlobalScope<"u"&&typeof S().importScripts=="function"}function Rs(){return o(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function ks(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function Ns(){return wi()?self:null}var Ti="firebaseLocalStorageDb",Ds=1,Fe="firebaseLocalStorage",bi="fbase_key",q=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Be(n,e){return n.transaction([Fe],e?"readwrite":"readonly").objectStore(Fe)}function Ls(){let n=indexedDB.deleteDatabase(Ti);return new q(n).toPromise()}function Rt(){let n=indexedDB.open(Ti,Ds);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let i=n.result;try{i.createObjectStore(Fe,{keyPath:bi})}catch(r){t(r)}}),n.addEventListener("success",()=>o(null,null,function*(){let i=n.result;i.objectStoreNames.contains(Fe)?e(i):(i.close(),yield Ls(),e(yield Rt()))}))})}function jn(n,e,t){return o(this,null,function*(){let i=Be(n,!0).put({[bi]:e,value:t});return new q(i).toPromise()})}function Ms(n,e){return o(this,null,function*(){let t=Be(n,!1).get(e),i=yield new q(t).toPromise();return i===void 0?null:i.value})}function $n(n,e){let t=Be(n,!0).delete(e);return new q(t).toPromise()}var Us=800,xs=3,Fs=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return o(this,null,function*(){return this.db?this.db:(this.db=yield Rt(),this.db)})}_withRetries(t){return o(this,null,function*(){let i=0;for(;;)try{let r=yield this._openDb();return yield t(r)}catch(r){if(i++>xs)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return o(this,null,function*(){return wi()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return o(this,null,function*(){this.receiver=Cs._getInstance(Ns()),this.receiver._subscribe("keyChanged",(t,i)=>o(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(i.key)}})),this.receiver._subscribe("ping",(t,i)=>o(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return o(this,null,function*(){var t,i;if(this.activeServiceWorker=yield Rs(),!this.activeServiceWorker)return;this.sender=new Ot(this.activeServiceWorker);let r=yield this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((i=r[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return o(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||ks()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return o(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Rt();return yield jn(t,Ue,"1"),yield $n(t,Ue),!0}catch{}return!1})}_withPendingWrite(t){return o(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,i){return o(this,null,function*(){return this._withPendingWrite(()=>o(this,null,function*(){return yield this._withRetries(r=>jn(r,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)}))})}_get(t){return o(this,null,function*(){let i=yield this._withRetries(r=>Ms(r,t));return this.localCache[t]=i,i})}_remove(t){return o(this,null,function*(){return this._withPendingWrite(()=>o(this,null,function*(){return yield this._withRetries(i=>$n(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return o(this,null,function*(){let t=yield this._withRetries(s=>{let a=Be(s,!1).getAll();return new q(a).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let i=[],r=new Set;if(t.length!==0)for(let{fbase_key:s,value:a}of t)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),i.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),i.push(s));return i})}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>o(this,null,function*(){return this._poll()}),Us)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),Ai=Fs;var mo=pi("rcb"),go=new z(3e4,6e4);function Si(n,e){return e?k(e):(h(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var _e=class extends he{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ee(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ee(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ee(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function Vs(n){return ws(n.auth,new _e(n),n.bypassAuthState)}function Hs(n){let{auth:e,user:t}=n;return h(t,e,"internal-error"),Es(t,new _e(n),n.bypassAuthState)}function Ws(n){return o(this,null,function*(){let{auth:e,user:t}=n;return h(t,e,"internal-error"),ys(t,new _e(n),n.bypassAuthState)})}var Ve=class{constructor(e,t,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>o(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}}))}onAuthEvent(e){return o(this,null,function*(){let{urlResponse:t,sessionId:i,postBody:r,tenantId:s,error:a,type:c}=e;if(a){this.reject(a);return}let l={auth:this.auth,requestUri:t,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(l))}catch(u){this.reject(u)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Vs;case"linkViaPopup":case"linkViaRedirect":return Ws;case"reauthViaPopup":case"reauthViaRedirect":return Hs;default:P(this.auth,"internal-error")}}resolve(e){N(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){N(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Bs=new z(2e3,1e4);function je(n,e,t){return o(this,null,function*(){if(w(n.app))return Promise.reject(T(n,"operation-not-supported-in-this-environment"));let i=We(n);Yr(n,e,pe);let r=Si(i,t);return new js(i,"signInViaPopup",e,r).executeNotNull()})}var js=(()=>{class n extends Ve{constructor(t,i,r,s,a){super(t,i,s,a),this.provider=r,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){return o(this,null,function*(){let t=yield this.execute();return h(t,this.auth,"internal-error"),t})}onExecution(){return o(this,null,function*(){N(this.filter.length===1,"Popup operations only handle one event");let t=qt();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(T(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(T(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var i,r;if(!((r=(i=this.authWindow)===null||i===void 0?void 0:i.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(T(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Bs.get())};t()}}n.currentPopupAction=null;return n})(),$s="pendingRedirect",Ce=new Map,kt=class n extends Ve{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}execute(){return o(this,null,function*(){let e=Ce.get(this.auth._key());if(!e){try{let i=(yield zs(this.resolver,this.auth))?yield W(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Ce.set(this.auth._key(),e)}return this.bypassAuthState||Ce.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return o(this,null,function*(){if(e.type==="signInViaRedirect")return W(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,W(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return o(this,null,function*(){})}cleanUp(){}};function zs(n,e){return o(this,null,function*(){let t=Ks(e),i=Gs(n);if(!(yield i._isAvailable()))return!1;let r=(yield i._get(t))==="true";return yield i._remove(t),r})}function qs(n,e){Ce.set(n._key(),e)}function Gs(n){return k(n._redirectPersistence)}function Ks(n){return Pe($s,n.config.apiKey,n.name)}function Ys(n,e,t=!1){return o(this,null,function*(){if(w(n.app))return Promise.reject($(n));let i=We(n),r=Si(i,e),a=yield new kt(i,r,t).execute();return a&&!t&&(delete a.user._redirectEventId,yield i._persistUserIfCurrent(a.user),yield i._setRedirectUser(null,e)),a})}var Js=10*60*1e3,Nt=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Xs(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!Pi(e)){let r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(T(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Js&&this.cachedEventUids.clear(),this.cachedEventUids.has(zn(e))}saveEventToCache(e){this.cachedEventUids.add(zn(e)),this.lastProcessedEventTime=Date.now()}};function zn(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Pi({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Xs(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Pi(n);default:return!1}}function Qs(t){return o(this,arguments,function*(n,e={}){return te(n,"GET","/v1/projects",e)})}var Zs=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ea=/^https?/;function ta(n){return o(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield Qs(n);for(let t of e)try{if(na(t))return}catch{}P(n,"unauthorized-domain")})}function na(n){let e=Et(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){let a=new URL(n);return a.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===i}if(!ea.test(t))return!1;if(Zs.test(n))return i===n;let r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}var ia=new z(3e4,6e4);function qn(){let n=S().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function ra(n){return new Promise((e,t)=>{var i,r,s;function a(){qn(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{qn(),t(T(n,"network-request-failed"))},timeout:ia.get()})}if(!((r=(i=S().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=S().gapi)===null||s===void 0)&&s.load)a();else{let c=pi("iframefcb");return S()[c]=()=>{gapi.load?a():t(T(n,"network-request-failed"))},ps(`${ms()}?onload=${c}`).catch(l=>t(l))}}).catch(e=>{throw Oe=null,e})}var Oe=null;function sa(n){return Oe=Oe||ra(n),Oe}var aa=new z(5e3,15e3),oa="__/auth/iframe",ca="emulator/auth/iframe",la={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ua=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function da(n){let e=n.config;h(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?xt(e,ca):`https://${n.config.authDomain}/${oa}`,i={apiKey:e.apiKey,appName:n.name,v:Z},r=ua.get(n.config.apiHost);r&&(i.eid=r);let s=n._getFrameworks();return s.length&&(i.fw=s.join(",")),`${t}?${J(i).slice(1)}`}function ha(n){return o(this,null,function*(){let e=yield sa(n),t=S().gapi;return h(t,n,"internal-error"),e.open({where:document.body,url:da(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:la,dontclear:!0},i=>new Promise((r,s)=>o(null,null,function*(){yield i.restyle({setHideOnLeave:!1});let a=T(n,"network-request-failed"),c=S().setTimeout(()=>{s(a)},aa.get());function l(){S().clearTimeout(c),r(i)}i.ping(l).then(l,()=>{s(a)})})))})}var fa={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},pa=500,ma=600,ga="_blank",_a="http://localhost",He=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Ia(n,e,t,i=pa,r=ma){let s=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString(),c="",l=Object.assign(Object.assign({},fa),{width:i.toString(),height:r.toString(),top:s,left:a}),u=_().toLowerCase();t&&(c=oi(u)?ga:t),si(u)&&(e=e||_a,l.scrollbars="yes");let f=Object.entries(l).reduce((d,[g,y])=>`${d}${g}=${y},`,"");if(ls(u)&&c!=="_self")return va(e||"",c),new He(null);let p=window.open(e||"",c,f);h(p,n,"popup-blocked");try{p.focus()}catch{}return new He(p)}function va(n,e){let t=document.createElement("a");t.href=n,t.target=e;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}var ya="__/auth/handler",Ea="emulator/auth/handler",wa=encodeURIComponent("fac");function Gn(n,e,t,i,r,s){return o(this,null,function*(){h(n.config.authDomain,n,"auth-domain-config-required"),h(n.config.apiKey,n,"invalid-api-key");let a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Z,eventId:r};if(e instanceof pe){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",yn(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(let[f,p]of Object.entries(s||{}))a[f]=p}if(e instanceof me){let f=e.getScopes().filter(p=>p!=="");f.length>0&&(a.scopes=f.join(","))}n.tenantId&&(a.tid=n.tenantId);let c=a;for(let f of Object.keys(c))c[f]===void 0&&delete c[f];let l=yield n._getAppCheckToken(),u=l?`#${wa}=${encodeURIComponent(l)}`:"";return`${Ta(n)}?${J(c).slice(1)}${u}`})}function Ta({config:n}){return n.emulator?xt(n,Ea):`https://${n.authDomain}/${ya}`}var yt="webStorageSupport",Dt=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zt,this._completeRedirectFn=Ys,this._overrideRedirectResult=qs}_openPopup(e,t,i,r){return o(this,null,function*(){var s;N((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let a=yield Gn(e,t,i,Et(),r);return Ia(e,a,qt())})}_openRedirect(e,t,i,r){return o(this,null,function*(){yield this._originValidation(e);let s=yield Gn(e,t,i,Et(),r);return Os(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:r,promise:s}=this.eventManagers[t];return r?Promise.resolve(r):(N(s,"If manager is not set, promise should be"),s)}let i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}initAndGetManager(e){return o(this,null,function*(){let t=yield ha(e),i=new Nt(e);return t.register("authEvent",r=>(h(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(yt,{type:yt},r=>{var s;let a=(s=r?.[0])===null||s===void 0?void 0:s[yt];a!==void 0&&t(!!a),P(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ta(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return hi()||ai()||Ht()}},Ci=Dt;var Kn="@firebase/auth",Yn="1.10.7";var Lt=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return o(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){h(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function ba(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Aa(n){Q(new b("auth",(e,{options:t})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=i.options;h(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});let l={apiKey:a,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fi(n)},u=new Pt(i,r,s,l);return gs(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Q(new b("auth-internal",e=>{let t=We(e.getProvider("auth").getImmediate());return(i=>new Lt(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),U(Kn,Yn,ba(n)),U(Kn,Yn,"esm2017")}var Sa=5*60,Pa=nt("authIdTokenMaxAge")||Sa,Jn=null,Ca=n=>e=>o(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>Pa)return;let r=t?.token;Jn!==r&&(Jn=r,yield fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});function Gt(n=Ln()){let e=_t(n,"auth");if(e.isInitialized())return e.getImmediate();let t=mi(n,{popupRedirectResolver:Ci,persistence:[Ai,Ei,zt]}),i=nt("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(i,location.origin);if(location.origin===s.origin){let a=Ca(s.toString());yi(t,a,()=>a(t.currentUser)),vi(t,c=>a(c))}}let r=un("auth");return r&&gi(t,`http://${r}`),t}function Oa(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}fs({loadJS(n){return new Promise((e,t)=>{let i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{let s=T("internal-error");s.customData=r,t(s)},i.type="text/javascript",i.charset="UTF-8",Oa().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Aa("Browser");var Oi=class n{router=qe(rn);http=qe(nn);auth=Gt(It(re.firebaseConfig));googleProvider=new jt;facebookProvider=new Bt;constructor(){this.googleProvider.setCustomParameters({prompt:"select_account"})}signInWithFacebook(){return o(this,null,function*(){try{let e=yield je(this.auth,this.facebookProvider),t=yield e.user.getIdToken();return yield this.http.post(`${re.apiUrl}api/auth/google/login`,{idToken:t},{withCredentials:!0}).toPromise(),e.user}catch(e){throw e.code==="auth/account-exists-with-different-credential"&&alert("This email is already registered with another provider. Please try signing in with Google."),e}})}signInWithGoogle(){return o(this,null,function*(){try{let e=yield je(this.auth,this.googleProvider),t=yield e.user.getIdToken();return yield this.http.post(`${re.apiUrl}api/auth/google/login`,{idToken:t},{withCredentials:!1}).toPromise(),e.user}catch(e){throw e.code==="auth/account-exists-with-different-credential"&&alert("This email is already registered with another provider. Please try signing in with Facebook."),e}})}signOut(){return o(this,null,function*(){try{yield this.http.post(`${re.apiUrl}auth/logout`,{}).toPromise(),yield $t(this.auth),this.router.navigate(["/login"])}catch(e){throw e}})}getCurrentUser(){return this.auth.currentUser}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Qt({token:n,factory:n.\u0275fac,providedIn:"root"})};function ka(n,e){if(n&1&&Y(0,"div",20),n&2){let t=e.$implicit;v("transform","translate("+t.x+"px, "+t.y+"px) scale("+t.scale+")")("opacity",t.opacity)}}function Na(n,e){if(n&1&&Y(0,"div",21),n&2){let t=e.$implicit,i=e.index;v("transform","rotate("+i*60+"deg) scaleY("+t.scaleY+")")("opacity",t.opacity)}}var Ri=class n{crystalY=0;crystalRotation=0;crystalOpacity=.6;crystalScale=1;facetOpacity1=.3;facetOpacity2=.3;facetOpacity3=.3;glowScale=.8;glowOpacity=.4;baseScaleX=1;baseOpacity=.4;pulse1Scale=1;pulse1Opacity=.6;pulse2Scale=1;pulse2Opacity=.6;pulse3Scale=1;pulse3Opacity=.6;auraScale=1;auraOpacity=.3;textOpacity=.6;textY=0;particles=[];lightRays=[];animationFrameId;startTime=Date.now();ngOnInit(){this.particles=Array.from({length:16},(e,t)=>({id:t,x:0,y:0,opacity:1,scale:0})),this.lightRays=Array.from({length:6},()=>({scaleY:0,opacity:0})),this.animate()}ngOnDestroy(){this.animationFrameId&&cancelAnimationFrame(this.animationFrameId)}animate(){let e=(Date.now()-this.startTime)/1e3;this.crystalY=Math.sin(e*.5)*10,this.crystalRotation=Math.sin(e*.3)*2,this.crystalOpacity=.6+Math.sin(e)*.4,this.crystalScale=1+Math.sin(e)*.05,this.facetOpacity1=.3+Math.sin(e*2)*.5,this.facetOpacity2=.3+Math.sin(e*2+.4)*.5,this.facetOpacity3=.3+Math.sin(e*2+.8)*.5,this.glowScale=.8+Math.sin(e*1.5)*.4,this.glowOpacity=.4+Math.sin(e*1.5)*.4,this.baseScaleX=1+Math.sin(e)*.2,this.baseOpacity=.4+Math.sin(e)*.3;let t=e%3/3;this.pulse1Scale=1+t*2,this.pulse1Opacity=.6*(1-t);let i=(e+1)%3/3;this.pulse2Scale=1+i*2,this.pulse2Opacity=.6*(1-i);let r=(e+2)%3/3;this.pulse3Scale=1+r*2,this.pulse3Opacity=.6*(1-r),this.auraScale=1+Math.sin(e*.75)*.3,this.auraOpacity=.3+Math.sin(e*.75)*.3,this.textOpacity=.6+Math.sin(e)*.4,this.textY=Math.sin(e*1.5)*5,this.particles.forEach((s,a)=>{let c=(e+a*.1)%2,l=a*22.5*Math.PI/180;s.x=Math.cos(l)*60*c,s.y=Math.sin(l)*60*c,s.opacity=1-c,s.scale=c}),this.lightRays.forEach((s,a)=>{let c=(e+a*.3)%2;s.scaleY=c,s.opacity=.8*(1-c)}),this.animationFrameId=requestAnimationFrame(()=>this.animate())}trackParticle(e,t){return t.id}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Zt({type:n,selectors:[["app-magic-crystal"]],decls:22,vars:43,consts:[[1,"magic-crystal-overlay"],[1,"crystal-container"],[1,"crystal-main"],[1,"crystal-body"],[1,"crystal-facet","facet-1"],[1,"crystal-facet","facet-2"],[1,"crystal-facet","facet-3"],[1,"crystal-glow"],[1,"crystal-base"],[1,"energy-pulse","pulse-1"],[1,"energy-pulse","pulse-2"],[1,"energy-pulse","pulse-3"],[1,"magic-particles"],["class","particle",3,"transform","opacity",4,"ngFor","ngForOf","ngForTrackBy"],[1,"light-rays"],["class","light-ray",3,"transform","opacity",4,"ngFor","ngForOf"],[1,"crystal-aura"],[1,"loading-text"],[1,"loading-title"],[1,"loading-subtitle"],[1,"particle"],[1,"light-ray"]],template:function(t,i){t&1&&(K(0,"div",0)(1,"div",1)(2,"div",2),Y(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7),B(),Y(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11),K(12,"div",12),Ge(13,ka,1,4,"div",13),B(),K(14,"div",14),Ge(15,Na,1,4,"div",15),B(),Y(16,"div",16),B(),K(17,"div",17)(18,"h2",18),Ye(19,"Connecting to Terra"),B(),K(20,"p",19),Ye(21,"Validating your identity..."),B()()()),t&2&&(I(2),v("transform","translateY("+i.crystalY+"px) rotate("+i.crystalRotation+"deg)"),I(),v("opacity",i.crystalOpacity)("transform","scale("+i.crystalScale+")"),I(),v("opacity",i.facetOpacity1),I(),v("opacity",i.facetOpacity2),I(),v("opacity",i.facetOpacity3),I(),v("transform","scale("+i.glowScale+")")("opacity",i.glowOpacity),I(),v("transform","scaleX("+i.baseScaleX+")")("opacity",i.baseOpacity),I(),v("transform","scale("+i.pulse1Scale+")")("opacity",i.pulse1Opacity),I(),v("transform","scale("+i.pulse2Scale+")")("opacity",i.pulse2Opacity),I(),v("transform","scale("+i.pulse3Scale+")")("opacity",i.pulse3Opacity),I(2),Ke("ngForOf",i.particles)("ngForTrackBy",i.trackParticle),I(2),Ke("ngForOf",i.lightRays),I(),v("transform","scale("+i.auraScale+")")("opacity",i.auraOpacity),I(),v("opacity",i.textOpacity)("transform","translateY("+i.textY+"px)"))},dependencies:[tn,en],styles:[".magic-crystal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:9999;overflow:hidden}.crystal-container[_ngcontent-%COMP%]{position:relative;width:200px;height:200px;display:flex;justify-content:center;align-items:center}.crystal-main[_ngcontent-%COMP%]{position:relative;width:96px;height:128px;transition:transform .1s ease-out}.crystal-body[_ngcontent-%COMP%]{position:absolute;inset:0;background:linear-gradient(to bottom,#dabe64cc,#dabe6499,#dabe6466);clip-path:polygon(50% 0%,80% 25%,80% 75%,50% 100%,20% 75%,20% 25%);transition:opacity .1s ease-out,transform .1s ease-out}.crystal-facet[_ngcontent-%COMP%]{position:absolute;background:#dabe644d;top:25%;width:20%;height:50%;clip-path:polygon(0% 0%,100% 20%,100% 80%,0% 100%);transition:opacity .1s ease-out}.facet-1[_ngcontent-%COMP%]{left:20%}.facet-2[_ngcontent-%COMP%]{left:40%}.facet-3[_ngcontent-%COMP%]{left:60%}.crystal-glow[_ngcontent-%COMP%]{position:absolute;inset:16px;background:radial-gradient(circle,#dabe64 0%,transparent 70%);border-radius:50%;filter:blur(4px);transition:transform .1s ease-out,opacity .1s ease-out}.crystal-base[_ngcontent-%COMP%]{position:absolute;bottom:-16px;left:50%;width:64px;height:12px;background:#dabe6466;border-radius:50%;filter:blur(4px);transform:translate(-50%);transition:transform .1s ease-out,opacity .1s ease-out}.energy-pulse[_ngcontent-%COMP%]{position:absolute;inset:0;border:2px solid rgba(218,190,100,.4);border-radius:50%;transition:transform .1s ease-out,opacity .1s ease-out}.magic-particles[_ngcontent-%COMP%]{position:absolute;inset:0}.particle[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;width:4px;height:4px;background:#dabe64;border-radius:50%;transition:transform .1s ease-out,opacity .1s ease-out}.light-rays[_ngcontent-%COMP%]{position:absolute;inset:0}.light-ray[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;width:2px;height:80px;background:linear-gradient(to top,rgba(218,190,100,.6),transparent);transform-origin:0 40px;transition:transform .1s ease-out,opacity .1s ease-out}.crystal-aura[_ngcontent-%COMP%]{position:absolute;inset:-48px;background:radial-gradient(circle,rgba(218,190,100,.2) 0%,transparent 70%);border-radius:50%;filter:blur(20px);transition:transform .1s ease-out,opacity .1s ease-out}.loading-text[_ngcontent-%COMP%]{position:absolute;bottom:80px;text-align:center;transition:opacity .1s ease-out,transform .1s ease-out}.loading-title[_ngcontent-%COMP%]{color:#dabe64;font-size:32px;font-weight:700;margin:0 0 8px;text-shadow:0 0 10px rgba(218,190,100,.5)}.loading-subtitle[_ngcontent-%COMP%]{color:#9ca3af;font-size:16px;margin:0}@keyframes _ngcontent-%COMP%_crystalFloat{0%,to{transform:translateY(0) rotate(0)}50%{transform:translateY(-10px) rotate(2deg)}}@keyframes _ngcontent-%COMP%_crystalPulse{0%,to{opacity:.6;transform:scale(1)}50%{opacity:1;transform:scale(1.05)}}@keyframes _ngcontent-%COMP%_glowPulse{0%,to{opacity:.4;transform:scale(.8)}50%{opacity:.8;transform:scale(1.2)}}@keyframes _ngcontent-%COMP%_energyPulse{0%{transform:scale(1);opacity:.6}to{transform:scale(3);opacity:0}}@keyframes _ngcontent-%COMP%_particleFloat{0%{transform:translate(0) scale(0);opacity:1}to{transform:translate(var(--particle-x, 60px),var(--particle-y, 60px)) scale(1);opacity:0}}@keyframes _ngcontent-%COMP%_rayFlash{0%{transform:scaleY(0);opacity:0}50%{opacity:.8}to{transform:scaleY(1);opacity:0}}@keyframes _ngcontent-%COMP%_textFloat{0%,to{opacity:.6;transform:translateY(0)}50%{opacity:1;transform:translateY(-5px)}}@media (prefers-reduced-motion: reduce){.crystal-main[_ngcontent-%COMP%]{animation:crystalFloat 4s ease-in-out infinite}.crystal-body[_ngcontent-%COMP%]{animation:crystalPulse 2s ease-in-out infinite}.crystal-glow[_ngcontent-%COMP%]{animation:glowPulse 3s ease-in-out infinite}.energy-pulse[_ngcontent-%COMP%]{animation:energyPulse 3s ease-out infinite}.particle[_ngcontent-%COMP%]{animation:particleFloat 2s ease-out infinite}.light-ray[_ngcontent-%COMP%]{animation:rayFlash 2s ease-out infinite}.loading-text[_ngcontent-%COMP%]{animation:textFloat 2s ease-in-out infinite}}@media (max-width: 768px){.crystal-container[_ngcontent-%COMP%]{width:150px;height:150px}.crystal-main[_ngcontent-%COMP%]{width:72px;height:96px}.loading-title[_ngcontent-%COMP%]{font-size:24px}.loading-subtitle[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 480px){.crystal-container[_ngcontent-%COMP%]{width:120px;height:120px}.crystal-main[_ngcontent-%COMP%]{width:60px;height:80px}.loading-title[_ngcontent-%COMP%]{font-size:20px}.loading-subtitle[_ngcontent-%COMP%]{font-size:12px}}"]})};export{Oi as a,Ri as b};
