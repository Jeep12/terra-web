import{a as I}from"./chunk-IDGVBKOW.js";import{b as _,d as x,h as b,q as C,s as E}from"./chunk-H4TVSPRO.js";import{Cb as m,Eb as h,Lb as y,Oa as a,Sa as g,Ta as c,Ya as p,bb as f,jb as o,ob as s,pb as l,qb as n,wb as u,xb as v}from"./chunk-IYZISLN6.js";var M=(i,t)=>({"alert-danger":i,"alert-success":t});function w(i,t){i&1&&(s(0,"p"),m(1,"Verifying your email..."),l())}function T(i,t){i&1&&n(0,"i",13)}function S(i,t){i&1&&n(0,"i",14)}function O(i,t){if(i&1&&(s(0,"div",10),f(1,T,1,0,"i",11)(2,S,1,0,"i",12),m(3),l()),i&2){let e=v();o("ngClass",y(4,M,e.isError,!e.isError)),a(),o("ngIf",e.isError),a(),o("ngIf",!e.isError),a(),h(" ",e.statusMessage," ")}}function P(i,t){i&1&&(s(0,"div",15),n(1,"div",16),l())}var k=class i{constructor(t,e,r,d){this.route=t;this.authService=e;this.router=r;this.renderer=d}isLoading=!0;statusMessage="";isError=!1;ngOnInit(){let t=document.querySelector(".verify-container"),e=localStorage.getItem("theme");t&&(e==="dark"?this.renderer.addClass(t,"dark-mode"):this.renderer.removeClass(t,"dark-mode")),this.route.queryParams.subscribe(r=>{let d=r.token;this.verifyEmail(d)})}verifyEmail(t){this.isLoading=!0,this.statusMessage="",this.isError=!1,this.authService.verifyEmail(t).subscribe({next:e=>{setTimeout(()=>{this.isLoading=!1,this.isError=!1,this.statusMessage=e.message||"\xA1Email verificado correctamente!"},3500)},error:e=>{setTimeout(()=>{this.isLoading=!1,this.isError=!0,this.statusMessage=e.error?.message||"Error al verificar el email, el token puede ser inv\xE1lido o expirado."},3500)}})}navigateToLogin(){this.router.navigate(["/login"])}static \u0275fac=function(e){return new(e||i)(c(C),c(I),c(E),c(g))};static \u0275cmp=p({type:i,selectors:[["app-verify-email"]],decls:14,vars:3,consts:[[1,"verify-container"],["src","assets/images/lineage2Terra_blanco.webp","alt","Logo de Terra","width","300","height","227",1,"logoTerra"],[1,"verify-box"],[2,"font-size","14px","margin-bottom","20px","text-transform","uppercase"],[1,"fa-solid","fa-clock-rotate-left"],[4,"ngIf"],["class","alert","role","alert",3,"ngClass",4,"ngIf"],["class","progress-bar",4,"ngIf"],[1,"btn-secondary",3,"click"],[1,"fas","fa-arrow-left"],["role","alert",1,"alert",3,"ngClass"],["class","fas fa-times-circle","style","margin-right: 8px;",4,"ngIf"],["class","fas fa-check-circle","style","margin-right: 8px;",4,"ngIf"],[1,"fas","fa-times-circle",2,"margin-right","8px"],[1,"fas","fa-check-circle",2,"margin-right","8px"],[1,"progress-bar"],[1,"progress-fill"]],template:function(e,r){e&1&&(s(0,"div",0)(1,"div"),n(2,"img",1),l(),s(3,"div",2)(4,"h2",3),n(5,"i",4),m(6," Please wait while we verify your account"),l(),f(7,w,2,0,"p",5)(8,O,4,7,"div",6)(9,P,2,0,"div",7),n(10,"hr"),s(11,"button",8),u("click",function(){return r.navigateToLogin()}),n(12,"i",9),m(13," Back to login"),l()()()),e&2&&(a(7),o("ngIf",r.isLoading),a(),o("ngIf",!r.isLoading&&r.statusMessage),a(),o("ngIf",r.isLoading))},dependencies:[b,_,x],styles:[".verify-container[_ngcontent-%COMP%]{justify-content:center;align-items:center;min-height:100dvh;background:linear-gradient(to bottom,#0c0f20,#000);display:flex;flex-direction:column}.verify-box[_ngcontent-%COMP%]{background-color:#11111165;padding:40px;border-radius:12px;text-align:center;max-width:400px;width:90%;color:#dabe64;border:1px solid #3b3b3b}.logo[_ngcontent-%COMP%]{max-width:250px;margin-bottom:30px}.progress-bar[_ngcontent-%COMP%]{width:100%;height:10px;background-color:#1a1d2e;border-radius:5px;overflow:hidden;margin-top:20px}.progress-fill[_ngcontent-%COMP%]{height:100%;width:100%;background:linear-gradient(to right,#746535,#dabe64);animation:_ngcontent-%COMP%_loading 3s linear forwards}@keyframes _ngcontent-%COMP%_loading{0%{width:0}to{width:100%}}.verify-container.dark-mode[_ngcontent-%COMP%]{background:linear-gradient(to bottom,#121212,#000);color:#ddd}"]})};export{k as VerifyEmailComponent};
