import{a as R}from"./chunk-ONBG2WQO.js";import"./chunk-BVLKKP7E.js";import{a as I}from"./chunk-KU5NZZMO.js";import{d as y,e as P,f as A,i as E}from"./chunk-FETJZTIA.js";import{l as S,s as D}from"./chunk-K3SCHVK6.js";import{F as f,Fb as d,Hb as h,Nb as m,Oa as C,Qa as o,Va as b,_a as v,ba as _,ca as x,db as c,e as u,lb as a,mb as O,nb as w,qb as t,rb as e,sb as l,vb as k,yb as g,zb as M}from"./chunk-JKD7CX52.js";var B=()=>["/dashboard/home-dashboard"],z=()=>["/dashboard/offline-market"],L=()=>["/dashboard/buy-terra-coin"],F=()=>["/dashboard/send-terra-coin"],j=()=>["/dashboard/create-account-game"],U=()=>["/dashboard/change-password-game"],q=()=>["/dashboard/setting-account-master"],N=()=>["/dashboard/support"],V=()=>["/"];function W(n,r){if(n&1){let s=k();t(0,"div",44),g("click",function(){_(s);let p=M();return x(p.toggleSidebar())}),e()}n&2&&O("display","none")}function G(n,r){n&1&&l(0,"i",45)}function J(n,r){n&1&&l(0,"i",46)}function K(n,r){n&1&&(t(0,"span",47),d(1,"Terra"),e())}function Q(n,r){n&1&&(t(0,"span",48),d(1,"Home"),e())}function X(n,r){n&1&&(t(0,"span",48),d(1,"Community"),e())}function Y(n,r){n&1&&(t(0,"span",48),d(1,"Offline Market"),e())}function Z(n,r){n&1&&(t(0,"span",48),d(1,"Buy Terra Coin"),e())}function $(n,r){n&1&&(t(0,"span",48),d(1,"Send Terra Coin"),e())}function ee(n,r){n&1&&(t(0,"span",48),d(1,"Create Account"),e())}function te(n,r){n&1&&(t(0,"span",48),d(1,"Change Password"),e())}function ne(n,r){n&1&&(t(0,"span",48),d(1,"Settings"),e())}function oe(n,r){n&1&&(t(0,"span",48),d(1,"Support"),e())}var H=class n{constructor(r,s){this.authService=r;this.router=s}sidebarCollapsed=!1;isMobile=!1;accountMaster=null;isLoading=!0;subscription=new u;ngOnInit(){this.checkScreenSize(),this.isMobile&&(this.sidebarCollapsed=!0),this.loadUserData()}ngOnDestroy(){this.subscription.unsubscribe()}onResize(r){this.checkScreenSize(),this.isMobile&&!this.sidebarCollapsed&&(this.sidebarCollapsed=!0)}checkScreenSize(){this.isMobile=window.innerWidth<768}toggleSidebar(){this.sidebarCollapsed=!this.sidebarCollapsed}loadUserData(){console.log("\u{1F50D} [DASHBOARD2] loadUserData() llamado"),this.isLoading=!0,this.subscription.unsubscribe(),this.subscription=new u,console.log("\u{1F50D} [DASHBOARD2] Haciendo llamada a getCurrentUser()");let r=this.authService.getCurrentUser().pipe(f(1)).subscribe({next:s=>{console.log("\u{1F50D} [DASHBOARD2] Respuesta exitosa de getCurrentUser:",s),s?(this.accountMaster=s,console.log("\u{1F50D} [DASHBOARD2] Usuario establecido:",this.accountMaster)):(console.error("\u{1F50D} [DASHBOARD2] No user data found"),this.accountMaster=null),this.isLoading=!1,console.log("\u{1F50D} [DASHBOARD2] Loading completado")},error:s=>{if(console.error("\u{1F50D} [DASHBOARD2] Error fetching user:",s),console.error("\u{1F50D} [DASHBOARD2] Error status:",s?.status),console.error("\u{1F50D} [DASHBOARD2] Error message:",s?.message),this.accountMaster=null,this.isLoading=!1,s?.status===401){console.log("\u{1F50D} [DASHBOARD2] Error 401 detectado, intentando refresh token");let i=this.authService.refreshToken().pipe(f(1)).subscribe({next:p=>{console.log("\u{1F50D} [DASHBOARD2] Refresh token exitoso:",p),console.log("\u{1F50D} [DASHBOARD2] Cookies despu\xE9s del refresh:",document.cookie),console.log("\u{1F50D} [DASHBOARD2] Token refreshed successfully")},error:p=>{console.error("\u{1F50D} [DASHBOARD2] Refresh token failed:",p),console.error("\u{1F50D} [DASHBOARD2] Refresh error status:",p?.status),console.error("\u{1F50D} [DASHBOARD2] Refresh error message:",p?.message),this.router.navigate(["/login"])}});this.subscription.add(i)}else s?.message==="2FA required"?(console.log("\u{1F50D} [DASHBOARD2] 2FA required, navegando a two-factor"),this.router.navigate(["/two-factor-step"])):(console.log("\u{1F50D} [DASHBOARD2] Otro error, navegando a login"),this.router.navigate(["/login"]))}});this.subscription.add(r)}logout(){let r=this.authService.logout().pipe(f(1)).subscribe({next:()=>{this.router.navigate(["/login"])},error:s=>{console.error("Logout error:",s),this.authService.logout(),this.router.navigate(["/login"])}});this.subscription.add(r)}static \u0275fac=function(s){return new(s||n)(b(R),b(P))};static \u0275cmp=v({type:n,selectors:[["app-dashboard2"]],hostBindings:function(s,i){s&1&&g("resize",function(T){return i.onResize(T)},!1,C)},decls:89,vars:35,consts:[[1,"dashboard-container"],["class","mobile-backdrop",3,"display","click",4,"ngIf"],[1,"sidebar"],[1,"sidebar-toggle",3,"click"],["class","fa-solid fa-arrow-right",4,"ngIf"],["class","fa-solid fa-arrow-left",4,"ngIf"],[1,"sidebar-header"],[1,"logo",2,"margin-left","-10px"],[1,"logo-icon"],["src","assets/images/Tlogo-terra.webp","width","40px","height","50px","alt",""],["class","logo-text",4,"ngIf"],[1,"sidebar-nav"],[1,"nav-list"],[1,"nav-item"],[1,"nav-link",3,"routerLink"],[1,"nav-icon"],[1,"fa-solid","fa-house-chimney"],["class","nav-text",4,"ngIf"],[1,"nav-link"],[1,"fa-solid","fa-users"],[1,"fas","fa-store"],[1,"fa-solid","fa-coins"],[1,"fa-solid","fa-share"],[1,"fa-solid","fa-gamepad"],[1,"fa-solid","fa-lock"],[1,"fa-solid","fa-gears"],[1,"fa-solid","fa-circle-question"],[1,"main-content"],[1,"header"],[1,"header-left"],[1,"action-btn",3,"routerLink"],[1,"notification-badge",2,"display","none"],[1,"fa-solid","fa-arrow-up-right-from-square"],[1,"header-right"],[1,"header-actions"],[1,"action-btn"],[1,"fa-solid","fa-bell",2,"color","#dabe64"],[1,"user-profile"],[1,"user-name"],[1,"fa-solid","fa-envelope"],[1,"terra-coins"],[1,"btn-logout",3,"click"],[1,"fa-solid","fa-right-from-bracket"],[1,"dashboard-content"],[1,"mobile-backdrop",3,"click"],[1,"fa-solid","fa-arrow-right"],[1,"fa-solid","fa-arrow-left"],[1,"logo-text"],[1,"nav-text"]],template:function(s,i){s&1&&(l(0,"app-preload"),t(1,"div",0),c(2,W,1,2,"div",1),t(3,"aside",2)(4,"button",3),g("click",function(){return i.toggleSidebar()}),c(5,G,1,0,"i",4)(6,J,1,0,"i",5),e(),l(7,"br")(8,"br"),t(9,"div",6)(10,"div",7)(11,"span",8),l(12,"img",9),e(),c(13,K,2,0,"span",10),e()(),t(14,"nav",11)(15,"ul",12)(16,"li",13)(17,"a",14)(18,"span",15),l(19,"i",16),e(),c(20,Q,2,0,"span",17),e()(),t(21,"li",13)(22,"a",18)(23,"span",15),l(24,"i",19),e(),c(25,X,2,0,"span",17),e()(),t(26,"li",13)(27,"a",14)(28,"span",15),l(29,"i",20),e(),c(30,Y,2,0,"span",17),e()(),t(31,"li",13)(32,"a",14)(33,"span",15),l(34,"i",21),e(),c(35,Z,2,0,"span",17),e()(),t(36,"li",13)(37,"a",14)(38,"span",15),l(39,"i",22),e(),c(40,$,2,0,"span",17),e()(),t(41,"li",13)(42,"a",14)(43,"span",15),l(44,"i",23),e(),c(45,ee,2,0,"span",17),e()(),t(46,"li",13)(47,"a",14)(48,"span",15),l(49,"i",24),e(),c(50,te,2,0,"span",17),e()(),t(51,"li",13)(52,"a",14)(53,"span",15),l(54,"i",25),e(),c(55,ne,2,0,"span",17),e()(),t(56,"li",13)(57,"a",14)(58,"span",15),l(59,"i",26),e(),c(60,oe,2,0,"span",17),e()()()()(),t(61,"main",27)(62,"header",28)(63,"div",29)(64,"button",30)(65,"span",31),d(66,"-"),e(),d(67," Go to Website "),l(68,"i",32),e()(),t(69,"div",33)(70,"div",34)(71,"button",35)(72,"span",31),d(73,"-"),e(),l(74,"i",36),e(),t(75,"div",37)(76,"span",38),l(77,"i",39),d(78),e(),d(79," \xA0 "),t(80,"span",40),l(81,"i",21),d(82),e()(),d(83," \xA0 "),t(84,"button",41),g("click",function(){return i.logout()}),l(85,"i",42),d(86," Logout "),e()()()(),t(87,"div",43),l(88,"router-outlet"),e()()()),s&2&&(o(2),a("ngIf",!i.sidebarCollapsed),o(),w("collapsed",i.sidebarCollapsed),o(2),a("ngIf",i.sidebarCollapsed),o(),a("ngIf",!i.sidebarCollapsed),o(7),a("ngIf",!i.sidebarCollapsed),o(4),a("routerLink",m(26,B)),o(3),a("ngIf",!i.sidebarCollapsed),o(5),a("ngIf",!i.sidebarCollapsed),o(2),a("routerLink",m(27,z)),o(3),a("ngIf",!i.sidebarCollapsed),o(2),a("routerLink",m(28,L)),o(3),a("ngIf",!i.sidebarCollapsed),o(2),a("routerLink",m(29,F)),o(3),a("ngIf",!i.sidebarCollapsed),o(2),a("routerLink",m(30,j)),o(3),a("ngIf",!i.sidebarCollapsed),o(2),a("routerLink",m(31,U)),o(3),a("ngIf",!i.sidebarCollapsed),o(2),a("routerLink",m(32,q)),o(3),a("ngIf",!i.sidebarCollapsed),o(2),a("routerLink",m(33,N)),o(3),a("ngIf",!i.sidebarCollapsed),o(4),a("routerLink",m(34,V)),o(14),h(" ",i.accountMaster==null?null:i.accountMaster.email,""),o(4),h(" Terra Coins: ",i.accountMaster==null?null:i.accountMaster.terraCoins,""))},dependencies:[D,S,y,E,A,I],styles:['.dashboard-container[_ngcontent-%COMP%]{display:flex;height:100vh;background-color:#f8fafc;position:relative;background-image:url(/assets/images/3433814.jpg)}.mobile-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#00000080;z-index:900}.sidebar[_ngcontent-%COMP%]{width:260px;background:linear-gradient(to bottom,#0c0f20,#000);color:#fff;transition:all .3s ease;overflow:hidden;position:relative;z-index:1000}.sidebar.collapsed[_ngcontent-%COMP%]{width:70px}.sidebar-header[_ngcontent-%COMP%]{padding:1.5rem;border-bottom:1px solid rgba(255,255,255,.1)}.logo[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.logo-icon[_ngcontent-%COMP%]{font-size:1.5rem;min-width:24px}.logo-text[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;white-space:nowrap;text-transform:uppercase;margin-top:10px}.sidebar-nav[_ngcontent-%COMP%]{padding:1rem 0}.nav-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.nav-item[_ngcontent-%COMP%]{margin:.25rem 0}.nav-item.active[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{background-color:#fff3;color:#fff}.nav-link[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:.75rem 1.5rem;color:#fffc;text-decoration:none;transition:all .2s ease;white-space:nowrap;font-weight:500}.nav-link[_ngcontent-%COMP%]:hover{background-color:#ffffff1a;color:#dabe64}.nav-icon[_ngcontent-%COMP%]{font-size:1.1rem;min-width:20px;text-align:center}.nav-text[_ngcontent-%COMP%]{display:inline-block}.main-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;overflow:hidden;min-width:0}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem 2rem;background:#fff;border-bottom:1px solid #e2e8f0;box-shadow:0 1px 3px #0000001a;flex-wrap:wrap;gap:1rem}.header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;min-width:0}.sidebar-toggle[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:.5rem;border-radius:.375rem;transition:background-color .2s;flex-shrink:0;float:right;margin-right:20px;color:#fffc;font-size:20px}.page-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#1e293b;margin:0;white-space:nowrap}.header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex-wrap:wrap}.header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;flex-shrink:0}.action-btn[_ngcontent-%COMP%]{position:relative;background:none;border:none;padding:.5rem;border-radius:.375rem;cursor:pointer;font-size:1.1rem;transition:background-color .2s}.action-btn[_ngcontent-%COMP%]:hover{background-color:#f1f5f9}.notification-badge[_ngcontent-%COMP%]{position:absolute;top:0;right:0;background-color:#ef4444;color:#fff;font-size:.75rem;padding:.125rem .375rem;border-radius:9999px;min-width:1.25rem;text-align:center}.user-profile[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.5rem;border-radius:.5rem;cursor:pointer;transition:background-color .2s}.terra-coins[_ngcontent-%COMP%]{padding:7px;background:transparent;color:#dabe64;font-weight:600;font-size:16px;cursor:pointer;transition:all .3s ease;position:relative}.terra-coins[_ngcontent-%COMP%]:before{content:"";display:block;position:absolute;top:0;left:-5px;width:5px;height:100%;border-right:5px solid #dabe64;border-top:5px solid transparent}.terra-coins[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:0;height:2px;width:100%;background-color:#dabe64}.terra-coins[_ngcontent-%COMP%]:hover{border:none;background:#ececec;color:#dabe64;font-weight:600;font-size:16px;cursor:pointer}.user-name[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:#dabe64;white-space:nowrap;text-decoration:underline}.dashboard-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;overflow-x:hidden}@media (max-width: 768px){.sidebar[_ngcontent-%COMP%]{width:100%}.header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;padding:1rem}.header-left[_ngcontent-%COMP%]{width:100%;justify-content:space-between}.page-title[_ngcontent-%COMP%]{font-size:1.25rem}.header-right[_ngcontent-%COMP%]{width:100%;justify-content:center;flex-direction:row;align-items:flex-start}.header-actions[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:space-around;width:100%;gap:.5rem}.user-profile[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.user-name[_ngcontent-%COMP%]{word-break:break-word}.btn-secondary[_ngcontent-%COMP%]{width:100%;text-align:center}}.btn-logout[_ngcontent-%COMP%]{border:none;background:linear-gradient(to right,#746535,#dabe64);color:#fff;font-weight:600;font-size:16px;cursor:pointer;transition:all .3s ease;position:relative;padding:7px}.btn-logout[_ngcontent-%COMP%]:before{content:"";display:block;position:absolute;top:0;left:-10px;width:10px;height:100%;border-right:10px solid #746535;border-top:10px solid transparent;border-bottom:10px solid transparent}.btn-logout[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;top:0;right:-10px;width:10px;height:100%;border-left:10px solid #dabe64;border-top:10px solid transparent;border-bottom:10px solid transparent}.btn-logout[_ngcontent-%COMP%]:hover{background:transparent;color:#dabe64;border-top:1.5px solid #dabe64;border-bottom:1.5px solid #dabe64}.btn-logout[_ngcontent-%COMP%]:hover:after{border-left:10px solid white;filter:drop-shadow(2px 0px 0px #dabe64)!important}.btn-logout[_ngcontent-%COMP%]:hover:before{border-right:10px solid white;filter:drop-shadow(-2px 0px 0px #dabe64)!important}@media (max-width: 402px){.header-actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;padding:5px}.btn-logout[_ngcontent-%COMP%]{width:100%}}']})};export{H as Dashboard2Component};
