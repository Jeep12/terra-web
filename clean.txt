#!/bin/bash

# CONFIG
REPO_URL="https://github.com/Jeep12/terra-web.git"
NEW_DIR="terra-web-clean"

echo "ğŸ“¦ Clonando el repo actual en modo normal..."
git clone "$REPO_URL" "$NEW_DIR"
cd "$NEW_DIR" || exit 1

echo "ğŸ§¹ Creando rama huÃ©rfana sin historial..."
git checkout --orphan clean-main

echo "ğŸ§¼ Borrando archivos del historial anterior..."
git rm -rf . > /dev/null 2>&1

echo "ğŸ“¥ Agregando estado actual..."
git add .
git commit -m "ğŸ”„ Historial limpio â€“ estado actual sin environments"

echo "ğŸ§¹ Borrando rama anterior y renombrando..."
git branch -D main 2>/dev/null
git branch -m main

echo "â˜ï¸ Pusheando al repo remoto con --force..."
git push --force origin main

echo "âœ… Â¡Listo! El repo ahora tiene solo un commit con el estado actual."
